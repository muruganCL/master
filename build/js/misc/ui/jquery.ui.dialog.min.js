!function(i,e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},o={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};i.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(e){var t=i(this).css(e).offset().top;0>t&&i(this).css("top",e.top-t)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var e=this,t=e.options,o=t.title||"&#160;",a=i.ui.dialog.getTitleId(e.element),n=(e.uiDialog=i("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+t.dialogClass).css({zIndex:t.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(o){t.closeOnEscape&&o.keyCode&&o.keyCode===i.ui.keyCode.ESCAPE&&(e.close(o),o.preventDefault())}).attr({role:"dialog","aria-labelledby":a}).mousedown(function(i){e.moveToTop(!1,i)});e.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(n);var s=(e.uiDialogTitlebar=i("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(n),l=i('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).focus(function(){l.addClass("ui-state-focus")}).blur(function(){l.removeClass("ui-state-focus")}).click(function(i){return e.close(i),!1}).appendTo(s);(e.uiDialogTitlebarCloseText=i("<span></span>")).addClass("ui-icon ui-icon-closethick").text(t.closeText).appendTo(l),i("<span></span>").addClass("ui-dialog-title").attr("id",a).html(o).prependTo(s),i.isFunction(t.beforeclose)&&!i.isFunction(t.beforeClose)&&(t.beforeClose=t.beforeclose),s.find("*").add(s).disableSelection(),t.draggable&&i.fn.draggable&&e._makeDraggable(),t.resizable&&i.fn.resizable&&e._makeResizable(),e._createButtons(t.buttons),e._isOpen=!1,i.fn.bgiframe&&n.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var i=this;return i.overlay&&i.overlay.destroy(),i.uiDialog.hide(),i.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),i.uiDialog.remove(),i.originalTitle&&i.element.attr("title",i.originalTitle),i},widget:function(){return this.uiDialog},close:function(e){var t,o,a=this;return!1!==a._trigger("beforeClose",e)?(a.overlay&&a.overlay.destroy(),a.uiDialog.unbind("keypress.ui-dialog"),a._isOpen=!1,a.options.hide?a.uiDialog.hide(a.options.hide,function(){a._trigger("close",e)}):(a.uiDialog.hide(),a._trigger("close",e)),i.ui.dialog.overlay.resize(),a.options.modal&&(t=0,i(".ui-dialog").each(function(){this!==a.uiDialog[0]&&(o=i(this).css("z-index"),isNaN(o)||(t=Math.max(t,o)))}),i.ui.dialog.maxZ=t),a):void 0},isOpen:function(){return this._isOpen},moveToTop:function(e,t){var o=this,a=o.options;return a.modal&&!e||!a.stack&&!a.modal?o._trigger("focus",t):(a.zIndex>i.ui.dialog.maxZ&&(i.ui.dialog.maxZ=a.zIndex),o.overlay&&(i.ui.dialog.maxZ+=1,o.overlay.$el.css("z-index",i.ui.dialog.overlay.maxZ=i.ui.dialog.maxZ)),e={scrollTop:o.element.attr("scrollTop"),scrollLeft:o.element.attr("scrollLeft")},i.ui.dialog.maxZ+=1,o.uiDialog.css("z-index",i.ui.dialog.maxZ),o.element.attr(e),o._trigger("focus",t),o)},open:function(){if(!this._isOpen){var e=this,t=e.options,o=e.uiDialog;return e.overlay=t.modal?new i.ui.dialog.overlay(e):null,e._size(),e._position(t.position),o.show(t.show),e.moveToTop(!0),t.modal&&o.bind("keypress.ui-dialog",function(e){if(e.keyCode===i.ui.keyCode.TAB){var t=i(":tabbable",this),o=t.filter(":first");if(t=t.filter(":last"),e.target===t[0]&&!e.shiftKey)return o.focus(1),!1;if(e.target===o[0]&&e.shiftKey)return t.focus(1),!1}}),i(e.element.find(":tabbable").get().concat(o.find(".ui-dialog-buttonpane :tabbable").get().concat(o.get()))).eq(0).focus(),e._isOpen=!0,e._trigger("open"),e}},_createButtons:function(e){var t=this,o=!1,a=i("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),n=i("<div></div>").addClass("ui-dialog-buttonset").appendTo(a);t.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof e&&null!==e&&i.each(e,function(){return!(o=!0)}),o&&(i.each(e,function(e,o){o=i.isFunction(o)?{click:o,text:e}:o,e=i('<button type="button"></button>').attr(o,!0).unbind("click").click(function(){o.click.apply(t.element[0],arguments)}).appendTo(n),i.fn.button&&e.button()}),a.appendTo(t.uiDialog))},_makeDraggable:function(){function e(i){return{position:i.position,offset:i.offset}}var t,o=this,a=o.options,n=i(document);o.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){t="auto"===a.height?"auto":i(this).height(),i(this).height(i(this).height()).addClass("ui-dialog-dragging"),o._trigger("dragStart",n,e(s))},drag:function(i,t){o._trigger("drag",i,e(t))},stop:function(s,l){a.position=[l.position.left-n.scrollLeft(),l.position.top-n.scrollTop()],i(this).removeClass("ui-dialog-dragging").height(t),o._trigger("dragStop",s,e(l)),i.ui.dialog.overlay.resize()}})},_makeResizable:function(t){function o(i){return{originalPosition:i.originalPosition,originalSize:i.originalSize,position:i.position,size:i.size}}t=t===e?this.options.resizable:t;var a=this,n=a.options,s=a.uiDialog.css("position");t="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw",a.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:a.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:a._minHeight(),handles:t,start:function(e,t){i(this).addClass("ui-dialog-resizing"),a._trigger("resizeStart",e,o(t))},resize:function(i,e){a._trigger("resize",i,o(e))},stop:function(e,t){i(this).removeClass("ui-dialog-resizing"),n.height=i(this).height(),n.width=i(this).width(),a._trigger("resizeStop",e,o(t)),i.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var i=this.options;return"auto"===i.height?i.minHeight:Math.min(i.minHeight,i.height)},_position:function(e){var t,o=[],a=[0,0];e?(("string"==typeof e||"object"==typeof e&&"0"in e)&&(o=e.split?e.split(" "):[e[0],e[1]],1===o.length&&(o[1]=o[0]),i.each(["left","top"],function(i,e){+o[i]===o[i]&&(a[i]=o[i],o[i]=e)}),e={my:o.join(" "),at:o.join(" "),offset:a.join(" ")}),e=i.extend({},i.ui.dialog.prototype.options.position,e)):e=i.ui.dialog.prototype.options.position,(t=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(i.extend({of:window},e)),t||this.uiDialog.hide()},_setOptions:function(e){var a=this,n={},s=!1;i.each(e,function(i,e){a._setOption(i,e),i in t&&(s=!0),i in o&&(n[i]=e)}),s&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var o=this,a=o.uiDialog;switch(e){case"beforeclose":e="beforeClose";break;case"buttons":o._createButtons(t);break;case"closeText":o.uiDialogTitlebarCloseText.text(""+t);break;case"dialogClass":a.removeClass(o.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+t);break;case"disabled":t?a.addClass("ui-dialog-disabled"):a.removeClass("ui-dialog-disabled");break;case"draggable":var n=a.is(":data(draggable)");n&&!t&&a.draggable("destroy"),!n&&t&&o._makeDraggable();break;case"position":o._position(t);break;case"resizable":(n=a.is(":data(resizable)"))&&!t&&a.resizable("destroy"),n&&"string"==typeof t&&a.resizable("option","handles",t),!n&&t!==!1&&o._makeResizable(t);break;case"title":i(".ui-dialog-title",o.uiDialogTitlebar).html(""+(t||"&#160;"))}i.Widget.prototype._setOption.apply(o,arguments)},_size:function(){var e,t,o=this.options,a=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),o.minWidth>o.width&&(o.width=o.minWidth),e=this.uiDialog.css({height:"auto",width:o.width}).height(),t=Math.max(0,o.minHeight-e),"auto"===o.height?i.support.minHeight?this.element.css({minHeight:t,height:"auto"}):(this.uiDialog.show(),o=this.element.css("height","auto").height(),a||this.uiDialog.hide(),this.element.height(Math.max(o,t))):this.element.height(Math.max(o.height-e,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),i.extend(i.ui.dialog,{version:"1.8.7",uuid:0,maxZ:0,getTitleId:function(i){return i=i.attr("id"),i||(this.uuid+=1,i=this.uuid),"ui-dialog-title-"+i},overlay:function(e){this.$el=i.ui.dialog.overlay.create(e)}}),i.extend(i.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:i.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(i){return i+".dialog-overlay"}).join(" "),create:function(e){0===this.instances.length&&(setTimeout(function(){i.ui.dialog.overlay.instances.length&&i(document).bind(i.ui.dialog.overlay.events,function(e){return i(e.target).zIndex()<i.ui.dialog.overlay.maxZ?!1:void 0})},1),i(document).bind("keydown.dialog-overlay",function(t){e.options.closeOnEscape&&t.keyCode&&t.keyCode===i.ui.keyCode.ESCAPE&&(e.close(t),t.preventDefault())}),i(window).bind("resize.dialog-overlay",i.ui.dialog.overlay.resize));var t=(this.oldInstances.pop()||i("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return i.fn.bgiframe&&t.bgiframe(),this.instances.push(t),t},destroy:function(e){var t=i.inArray(e,this.instances);-1!=t&&this.oldInstances.push(this.instances.splice(t,1)[0]),0===this.instances.length&&i([document,window]).unbind(".dialog-overlay"),e.remove();var o=0;i.each(this.instances,function(){o=Math.max(o,this.css("z-index"))}),this.maxZ=o},height:function(){var e,t;return i.browser.msie&&i.browser.version<7?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),t=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t>e?i(window).height()+"px":e+"px"):i(document).height()+"px"},width:function(){var e,t;return i.browser.msie&&i.browser.version<7?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t>e?i(window).width()+"px":e+"px"):i(document).width()+"px"},resize:function(){var e=i([]);i.each(i.ui.dialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:i.ui.dialog.overlay.width(),height:i.ui.dialog.overlay.height()})}}),i.extend(i.ui.dialog.overlay.prototype,{destroy:function(){i.ui.dialog.overlay.destroy(this.$el)}})}(jQuery);