!function(e){function t(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.ajaxSubmit=function(a){function r(){function r(){var t=l.attr("target"),a=l.attr("action");o.setAttribute("target",u),"POST"!=o.getAttribute("method")&&o.setAttribute("method","POST"),o.getAttribute("action")!=s.url&&o.setAttribute("action",s.url),s.skipEncodingOverride||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),s.timeout&&setTimeout(function(){v=!0,n()},s.timeout);var r=[];try{if(s.extraData)for(var i in s.extraData)r.push(e('<input type="hidden" name="'+i+'" value="'+s.extraData[i]+'" />').appendTo(o)[0]);f.appendTo("body"),f.data("form-plugin-onload",n),o.submit()}finally{o.setAttribute("action",a),t?o.setAttribute("target",t):l.removeAttr("target"),e(r).remove()}}function n(){if(!h){f.removeData("form-plugin-onload");var a=!0;try{if(v)throw"timeout";y=m.contentWindow?m.contentWindow.document:m.contentDocument?m.contentDocument:m.document;var r="xml"==s.dataType||y.XMLDocument||e.isXMLDoc(y);if(t("isXml="+r),!r&&window.opera&&(null==y.body||""==y.body.innerHTML)&&--T)return t("requeing onLoad callback, DOM not available"),void setTimeout(n,250);h=!0,d.responseText=y.documentElement?y.documentElement.innerHTML:null,d.responseXML=y.XMLDocument?y.XMLDocument:y,d.getResponseHeader=function(e){return{"content-type":s.dataType}[e]};var o=/(json|script)/.test(s.dataType);if(o||s.textarea){var u=y.getElementsByTagName("textarea")[0];if(u)d.responseText=u.value;else if(o){var l=y.getElementsByTagName("pre")[0],c=y.getElementsByTagName("body")[0];l?d.responseText=l.textContent:c&&(d.responseText=c.innerHTML)}}else"xml"!=s.dataType||d.responseXML||null==d.responseText||(d.responseXML=i(d.responseText));x=e.httpData(d,s.dataType)}catch(g){t("error caught:",g),a=!1,d.error=g,e.handleError(s,d,"error",g)}d.aborted&&(t("upload aborted"),a=!1),a&&(s.success.call(s.context,x,"success",d),p&&e.event.trigger("ajaxSuccess",[d,s])),p&&e.event.trigger("ajaxComplete",[d,s]),p&&!--e.active&&e.event.trigger("ajaxStop"),s.complete&&s.complete.call(s.context,d,a?"success":"error"),setTimeout(function(){f.removeData("form-plugin-onload"),f.remove(),d.responseXML=null},100)}}function i(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.tagName?t:null}var o=l[0];if(e(":input[name=submit],:input[id=submit]",o).length)alert('Error: Form elements must not have name or id of "submit".');else{var s=e.extend(!0,{},e.ajaxSettings,a);s.context=s.context||s;var u="jqFormIO"+(new Date).getTime(),c="_"+u;window[c]=function(){var e=f.data("form-plugin-onload");if(e){e(),window[c]=void 0;try{delete window[c]}catch(t){}}};var f=e('<iframe id="'+u+'" name="'+u+'" src="'+s.iframeSrc+'" onload="window[\'_\'+this.id]()" />'),m=f[0];f.css({position:"absolute",top:"-1000px",left:"-1000px"});var d={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1,f.attr("src",s.iframeSrc)}},p=s.global;if(p&&!e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[d,s]),s.beforeSend&&s.beforeSend.call(s.context,d,s)===!1)s.global&&e.active--;else if(!d.aborted){var h=!1,v=0,g=o.clk;if(g){var b=g.name;b&&!g.disabled&&(s.extraData=s.extraData||{},s.extraData[b]=g.value,"image"==g.type&&(s.extraData[b+".x"]=o.clk_x,s.extraData[b+".y"]=o.clk_y))}s.forceSync?r():setTimeout(r,10);var x,y,T=50}}}if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof a&&(a={success:a});var n=this.attr("action");if((n="string"==typeof n?e.trim(n):"")&&(n=(n.match(/^([^#]+)/)||[])[1]),n=n||window.location.href||"",a=e.extend(!0,{url:n,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a),n={},this.trigger("form-pre-serialize",[this,a,n]),n.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&a.beforeSerialize(this,a)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var i,o,s=this.formToArray(a.semantic);if(a.data){a.extraData=a.data;for(i in a.data)if(a.data[i]instanceof Array)for(var u in a.data[i])s.push({name:i,value:a.data[i][u]});else o=a.data[i],o=e.isFunction(o)?o():o,s.push({name:i,value:o})}if(a.beforeSubmit&&a.beforeSubmit(s,this,a)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[s,this,a,n]),n.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;i=e.param(s),"GET"==a.type.toUpperCase()?(a.url+=(a.url.indexOf("?")>=0?"&":"?")+i,a.data=null):a.data=i;var l=this,c=[];if(a.resetForm&&c.push(function(){l.resetForm()}),a.clearForm&&c.push(function(){l.clearForm()}),!a.dataType&&a.target){var f=a.success||function(){};c.push(function(t){var r=a.replaceTarget?"replaceWith":"html";e(a.target)[r](t).each(f,arguments)})}else a.success&&c.push(a.success);return a.success=function(e,t,r){for(var n=a.context||a,i=0,o=c.length;o>i;i++)c[i].apply(n,[e,t,r||l,l])},i=e("input:file",this).length>0,u="multipart/form-data"==l.attr("enctype")||"multipart/form-data"==l.attr("encoding"),a.iframe!==!1&&(i||a.iframe||u)?a.closeKeepAlive?e.get(a.closeKeepAlive,r):r():e.ajax(a),this.trigger("form-submit-notify",[this,a]),this},e.fn.ajaxForm=function(a){if(0===this.length){var r={s:this.selector,c:this.context};return!e.isReady&&r.s?(t("DOM not ready, queuing ajaxForm"),e(function(){e(r.s,r.c).ajaxForm(a)}),this):(t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(a))}).bind("click.form-plugin",function(t){var a=t.target,r=e(a);if(!r.is(":submit,input:image")){if(a=r.closest(":submit"),0==a.length)return;a=a[0]}var n=this;n.clk=a,"image"==a.type&&(void 0!=t.offsetX?(n.clk_x=t.offsetX,n.clk_y=t.offsetY):"function"==typeof e.fn.offset?(r=r.offset(),n.clk_x=t.pageX-r.left,n.clk_y=t.pageY-r.top):(n.clk_x=t.pageX-a.offsetLeft,n.clk_y=t.pageY-a.offsetTop)),setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var a=[];if(0===this.length)return a;var r=this[0],n=t?r.getElementsByTagName("*"):r.elements;if(!n)return a;var i,o,s,u,l,c;for(i=0,l=n.length;l>i;i++)if(o=n[i],s=o.name)if(t&&r.clk&&"image"==o.type)o.disabled||r.clk!=o||(a.push({name:s,value:e(o).val()}),a.push({name:s+".x",value:r.clk_x},{name:s+".y",value:r.clk_y}));else if((u=e.fieldValue(o,!0))&&u.constructor==Array)for(o=0,c=u.length;c>o;o++)a.push({name:s,value:u[o]});else null!==u&&"undefined"!=typeof u&&a.push({name:s,value:u});return!t&&r.clk&&(t=e(r.clk),n=t[0],(s=n.name)&&!n.disabled&&"image"==n.type&&(a.push({name:s,value:t.val()}),a.push({name:s+".x",value:r.clk_x},{name:s+".y",value:r.clk_y}))),a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var a=[];return this.each(function(){var r=this.name;if(r){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var i=0,o=n.length;o>i;i++)a.push({name:r,value:n[i]});else null!==n&&"undefined"!=typeof n&&a.push({name:this.name,value:n})}}),e.param(a)},e.fn.fieldValue=function(t){for(var a=[],r=0,n=this.length;n>r;r++){var i=e.fieldValue(this[r],t);null===i||"undefined"==typeof i||i.constructor==Array&&!i.length||(i.constructor==Array?e.merge(a,i):a.push(i))}return a},e.fieldValue=function(t,a){var r=t.name,n=t.type,i=t.tagName.toLowerCase();if(void 0===a&&(a=!0),a&&(!r||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==i&&-1==t.selectedIndex))return null;if("select"==i){var o=t.selectedIndex;if(0>o)return null;r=[],i=t.options;var s=(n="select-one"==n)?o+1:i.length;for(o=n?o:0;s>o;o++){var u=i[o];if(u.selected){var l=u.value;if(l||(l=u.attributes&&u.attributes.value&&!u.attributes.value.specified?u.text:u.value),n)return l;r.push(l)}}return r}return e(t).val()},e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})},e.fn.clearFields=e.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();"text"==e||"password"==e||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var a=this.type;"checkbox"==a||"radio"==a?this.checked=t:"option"==this.tagName.toLowerCase()&&(a=e(this).parent("select"),t&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=t)})}}(jQuery);