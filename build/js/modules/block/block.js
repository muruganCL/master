!function(e){Drupal.behaviors.blockSettingsSummary={attach:function(t){"undefined"!=typeof jQuery.fn.drupalSetSummary&&(e("fieldset#edit-path",t).drupalSetSummary(function(t){return e('textarea[name="pages"]',t).val()?Drupal.t("Restricted to certain pages"):Drupal.t("Not restricted")}),e("fieldset#edit-node-type",t).drupalSetSummary(function(t){var r=[];return e('input[type="checkbox"]:checked',t).each(function(){r.push(e.trim(e(this).next("label").html()))}),r.length||r.push(Drupal.t("Not restricted")),r.join(", ")}),e("fieldset#edit-role",t).drupalSetSummary(function(t){var r=[];return e('input[type="checkbox"]:checked',t).each(function(){r.push(e.trim(e(this).next("label").html()))}),r.length||r.push(Drupal.t("Not restricted")),r.join(", ")}),e("fieldset#edit-user",t).drupalSetSummary(function(t){var r=e('input[name="custom"]:checked',t);return 0==r.val()?Drupal.t("Not customizable"):r.next("label").html()}))}},Drupal.behaviors.blockDrag={attach:function(t,r){if("undefined"!=typeof Drupal.tableDrag&&"undefined"!=typeof Drupal.tableDrag.blocks){var a=e("table#blocks"),n=Drupal.tableDrag.blocks;n.row.prototype.onSwap=function(e){l(a,this)},Drupal.theme.tableDragChangedWarning=function(){return'<div class="messages warning">'+Drupal.theme("tableDragChangedMarker")+" "+Drupal.t("The changes to these blocks will not be saved until the <em>Save blocks</em> button is clicked.")+"</div>"},n.onDrop=function(){dragObject=this;var t=e(dragObject.rowObject.element).prevAll("tr.region-message").get(0),r=t.className.replace(/([^ ]+[ ]+)*region-([^ ]+)-message([ ]+[^ ]+)*/,"$2"),a=e("select.block-region-select",dragObject.rowObject.element);if(0==e("option[value="+r+"]",a).length)alert(Drupal.t("The block cannot be placed in this region.")),a.change();else if(e(dragObject.rowObject.element).prev("tr").is(".region-message")){var n=e("select.block-weight",dragObject.rowObject.element),l=n[0].className.replace(/([^ ]+[ ]+)*block-weight-([^ ]+)([ ]+[^ ]+)*/,"$2");a.is(".block-region-"+r)||(a.removeClass("block-region-"+l).addClass("block-region-"+r),n.removeClass("block-weight-"+l).addClass("block-weight-"+r),a.val(r))}},e("select.block-region-select",t).once("block-region-select",function(){e(this).change(function(t){var r=e(this).closest("tr"),o=e(this);n.rowObject=new n.row(r),a.find(".region-"+o[0].value+"-message").nextUntil(".region-message").last().before(r),l(a,r),o.get(0).blur()})});var l=function(t,r){e("tr.region-message",t).each(function(){e(this).prev("tr").get(0)==r.element&&("keyboard"!=r.method||"down"==r.direction)&&r.swap("after",this),e(this).next("tr").is(":not(.draggable)")||0==e(this).next("tr").length?e(this).removeClass("region-populated").addClass("region-empty"):e(this).is(".region-empty")&&e(this).removeClass("region-empty").addClass("region-populated")})}}}}}(jQuery);