!function(s){Drupal.behaviors.password={attach:function(e,t){var i=t.password;s("input.password-field",e).once("password",function(){var e=s(this),a=s(this).parent(),r=s(this).parent().parent();a.addClass("password-parent"),s("input.password-confirm",r).parent().prepend('<div class="password-confirm">'+i.confirmTitle+" <span></span></div>").addClass("confirm-parent");var n=s("input.password-confirm",r),d=s("div.password-confirm",r),o=s("span",d),c='<div class="password-strength"><div class="password-strength-text" aria-live="assertive"></div><div class="password-strength-title">'+i.strengthTitle+'</div><div class="password-indicator"><div class="indicator"></div></div></div>';s(n).parent().after('<div class="password-suggestions description"></div>'),s(a).prepend(c);var l=s("div.password-suggestions",r).hide(),p=function(){var i=Drupal.evaluatePasswordStrength(e.val(),t.password);l.html()!=i.message&&l.html(i.message),100==i.strength?l.hide():l.show(),s(a).find(".indicator").css("width",i.strength+"%"),s(a).find(".password-strength-text").html(i.indicatorText),u()},u=function(){if(n.val()){var s=e.val()===n.val();d.css({visibility:"visible"}),this.confirmClass&&o.removeClass(this.confirmClass);var t=s?"ok":"error";o.html(i["confirm"+(s?"Success":"Failure")]).addClass(t),this.confirmClass=t}else d.css({visibility:"hidden"})};e.keyup(p).focus(p).blur(p),n.keyup(u).blur(u)})}},Drupal.evaluatePasswordStrength=function(e,t){e=s.trim(e);var i=0,a=100,r=[],n=/[a-z]+/.test(e),d=/[A-Z]+/.test(e),o=/[0-9]+/.test(e),c=/[^a-zA-Z0-9]+/.test(e),l=s("input.username"),p=l.length>0?l.val():t.username;switch(e.length<6&&(r.push(t.tooShort),a-=5*(6-e.length)+30),n||(r.push(t.addLowerCase),i++),d||(r.push(t.addUpperCase),i++),o||(r.push(t.addNumbers),i++),c||(r.push(t.addPunctuation),i++),i){case 1:a-=12.5;break;case 2:a-=25;break;case 3:a-=40;break;case 4:a-=40}return""!==e&&e.toLowerCase()===p.toLowerCase()&&(r.push(t.sameAsUsername),a=5),60>a?indicatorText=t.weak:70>a?indicatorText=t.fair:80>a?indicatorText=t.good:100>=a&&(indicatorText=t.strong),r=t.hasWeaknesses+"<ul><li>"+r.join("</li><li>")+"</li></ul>",{strength:a,message:r,indicatorText:indicatorText}},Drupal.behaviors.fieldUserRegistration={attach:function(e,t){var i=s("form#field-ui-field-edit-form input#edit-instance-settings-user-register-form");i.length&&s("input#edit-instance-required",e).once("user-register-form-checkbox",function(){s(this).bind("change",function(e){s(this).attr("checked")&&i.attr("checked",!0)})})}}}(jQuery);