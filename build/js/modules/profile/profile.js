!function(e){Drupal.behaviors.profileDrag={attach:function(t,r){var a=e("#profile-fields"),o=Drupal.tableDrag["profile-fields"];o.row.prototype.onSwap=function(t){var r=this;e("tr.category-message",a).each(function(){e(this).prev("tr").get(0)==r.element&&("keyboard"!=r.method||"down"==r.direction)&&r.swap("after",this),e(this).next("tr").is(":not(.draggable)")||0==e(this).next("tr").length?e(this).removeClass("category-populated").addClass("category-empty"):e(this).is(".category-empty")&&e(this).removeClass("category-empty").addClass("category-populated")})},o.onDrop=function(){if(dragObject=this,e(dragObject.rowObject.element).prev("tr").is(".category-message")){var t=e(dragObject.rowObject.element).prev("tr").get(0),r=t.className.replace(/([^ ]+[ ]+)*category-([^ ]+)-message([ ]+[^ ]+)*/,"$2"),a=e("select.profile-category",dragObject.rowObject.element),o=e("select.profile-weight",dragObject.rowObject.element),s=o[0].className.replace(/([^ ]+[ ]+)*profile-weight-([^ ]+)([ ]+[^ ]+)*/,"$2");a.is(".profile-category-"+r)||(a.removeClass("profile-category-"+s).addClass("profile-category-"+r),o.removeClass("profile-weight-"+s).addClass("profile-weight-"+r),a.val(a[0].options[r].value))}}}}}(jQuery);