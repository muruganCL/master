!function(e){Drupal.behaviors.fileValidateAutoAttach={attach:function(i,a){a.file&&a.file.elements&&e.each(a.file.elements,function(n){var t=a.file.elements[n];e(n,i).bind("change",{extensions:t},Drupal.file.validateExtension)})},detach:function(i,a){a.file&&a.file.elements&&e.each(a.file.elements,function(a){e(a,i).unbind("change",Drupal.file.validateExtension)})}},Drupal.behaviors.fileButtons={attach:function(i){e("input.form-submit",i).bind("mousedown",Drupal.file.disableFields),e("div.form-managed-file input.form-submit",i).bind("mousedown",Drupal.file.progressBar)},detach:function(i){e("input.form-submit",i).unbind("mousedown",Drupal.file.disableFields),e("div.form-managed-file input.form-submit",i).unbind("mousedown",Drupal.file.progressBar)}},Drupal.behaviors.filePreviewLinks={attach:function(i){e("div.form-managed-file .file a, .file-widget .file a",i).bind("click",Drupal.file.openInNewWindow)},detach:function(i){e("div.form-managed-file .file a, .file-widget .file a",i).unbind("click",Drupal.file.openInNewWindow)}},Drupal.file=Drupal.file||{validateExtension:function(i){e(".file-upload-js-error").remove();var a=i.data.extensions.replace(/,\s*/g,"|");if(a.length>1&&this.value.length>0){var n=new RegExp("\\.("+a+")$","gi");if(!n.test(this.value)){var t=Drupal.t("The selected file %filename cannot be uploaded. Only files with the following extensions are allowed: %extensions.",{"%filename":this.value.replace("C:\\fakepath\\",""),"%extensions":a.replace(/\|/g,", ")});return e(this).closest("div.form-managed-file").prepend('<div class="messages error file-upload-js-error" aria-live="polite">'+t+"</div>"),this.value="",!1}}},disableFields:function(i){var a=this;if(e(a).hasClass("ajax-processed")){var n=[];e(this).closest("div.form-managed-file").length>0&&(n=e(this).closest("div.form-managed-file").find("input.form-file"));var t=e("div.form-managed-file input.form-file").not(n).not(":disabled");t.attr("disabled","disabled"),setTimeout(function(){t.attr("disabled",!1)},1e3)}},progressBar:function(i){var a=this,n=e(a).closest("div.form-managed-file").find("input.file-progress");if(n.length){var t=n.attr("name");n.attr("name",t.match(/APC_UPLOAD_PROGRESS|UPLOAD_IDENTIFIER/)[0]),setTimeout(function(){n.attr("name",t)},1e3)}setTimeout(function(){e(a).closest("div.form-managed-file").find("div.ajax-progress-bar").slideDown()},500)},openInNewWindow:function(i){return e(this).attr("target","_blank"),window.open(this.href,"filePreview","toolbar=0,scrollbars=1,location=1,statusbar=1,menubar=0,resizable=1,width=500,height=550"),!1}}}(jQuery);