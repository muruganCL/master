!function(e){Drupal.behaviors.moduleFilter={attach:function(i){e("#system-modules td.description").once("description",function(){e(".inner.expand",e(this)).click(function(){e(this).toggleClass("expanded")})}),e(".module-filter-inputs-wrapper",i).once("module-filter",function(){var r=e('input[name="module_filter[name]"]',i),t="#system-modules table tbody tr";Drupal.settings.moduleFilter.tabs&&(t+=".module"),r.moduleFilter(t,{wrapper:e("#module-filter-modules"),delay:500,striping:!0,childSelector:"td:nth(1)",rules:[function(e,i){if(!i.unavailable){if(e.options.showEnabled&&i.status&&!i.disabled)return!0;if(e.options.showDisabled&&!i.status&&!i.disabled)return!0;if(e.options.showRequired&&i.status&&i.disabled)return!0}return e.options.showUnavailable&&(i.unavailable||!i.status&&i.disabled)?!0:!1}],buildIndex:[function(i,r){var t=e("td.checkbox :checkbox",r.element);return t.size()>0?(r.status=t.is(":checked"),r.disabled=t.is(":disabled")):(r.status=!1,r.disabled=!0,r.unavailable=!0),r}],showEnabled:e("#edit-module-filter-show-enabled").is(":checked"),showDisabled:e("#edit-module-filter-show-disabled").is(":checked"),showRequired:e("#edit-module-filter-show-required").is(":checked"),showUnavailable:e("#edit-module-filter-show-unavailable").is(":checked")});var s=r.data("moduleFilter");s.operators={description:function(i,r,t){if(void 0==t.description){var s=e(".description",t.element).clone();e(".admin-requirements",s).remove(),e(".admin-operations",s).remove(),t.description=s.text().toLowerCase()}return t.description.indexOf(i)>=0?!0:void 0},requiredBy:function(e,i,r){if(void 0==r.requiredBy){var t=Drupal.ModuleFilter.getRequirements(r.element);r.requires=t.requires,r.requiredBy=t.requiredBy}for(var s in r.requiredBy)if(r.requiredBy[s].indexOf(e)>=0)return!0},requires:function(e,i,r){if(void 0==r.requires){var t=Drupal.ModuleFilter.getRequirements(r.element);r.requires=t.requires,r.requiredBy=t.requiredBy}for(var s in r.requires)if(r.requires[s].indexOf(e)>=0)return!0}},e("#edit-module-filter-show-enabled",i).change(function(){s.options.showEnabled=e(this).is(":checked"),s.applyFilter()}),e("#edit-module-filter-show-disabled",i).change(function(){s.options.showDisabled=e(this).is(":checked"),s.applyFilter()}),e("#edit-module-filter-show-required",i).change(function(){s.options.showRequired=e(this).is(":checked"),s.applyFilter()}),e("#edit-module-filter-show-unavailable",i).change(function(){s.options.showUnavailable=e(this).is(":checked"),s.applyFilter()}),Drupal.settings.moduleFilter.tabs||(s.element.bind("moduleFilter:start",function(){e("#system-modules fieldset").show()}),s.element.bind("moduleFilter:finish",function(i,r){e("#system-modules fieldset").each(function(i){$fieldset=e(this),0==e("tbody tr",$fieldset).filter(":visible").length&&$fieldset.hide()})}),s.applyFilter())})}},Drupal.ModuleFilter.getRequirements=function(i){var r=new Array,t=new Array;e(".admin-requirements",i).each(function(){var i=e(this).text();"Requires:"==i.substr(0,9)?(requiresString=i.substr(9),r=requiresString.replace(/\([a-z]*\)/g,"").split(",")):"Required by:"==i.substr(0,12)&&(requiredByString=i.substr(12),t=requiredByString.replace(/\([a-z]*\)/g,"").split(","))});for(var s in r)r[s]=e.trim(r[s].toLowerCase());for(var s in t)t[s]=e.trim(t[s].toLowerCase());return{requires:r,requiredBy:t}}}(jQuery);