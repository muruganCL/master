Drupal.viewsUi={},Drupal.behaviors.viewsUiEditView={},Drupal.behaviors.viewsUiEditView.attach=function(e,i){jQuery("#edit-query-options-disable-sql-rewrite").click(function(){jQuery(".sql-rewrite-warning").toggleClass("js-hide")})},Drupal.behaviors.viewsUiAddView={},Drupal.behaviors.viewsUiAddView.attach=function(e,i){var t,r,s,a=jQuery;t=new RegExp("[^a-z0-9\\-]+","g"),r="-";var o=a(e).find('[id^="edit-page-title"], [id^="edit-block-title"], [id^="edit-page-link-properties-title"]');o.length&&(this.fieldsFiller?this.fieldsFiller.rebind(o):this.fieldsFiller=new Drupal.viewsUi.FormFieldFiller(o));var n=a(e).find('[id^="edit-page-path"]');n.length&&(this.pathFiller?this.pathFiller.rebind(n):this.pathFiller=new Drupal.viewsUi.FormFieldFiller(n,t,r));var l=a(e).find('[id^="edit-page-feed-properties-path"]');l.length&&(this.feedFiller?this.feedFiller.rebind(l):(s=".xml",this.feedFiller=new Drupal.viewsUi.FormFieldFiller(l,t,r,s)))},Drupal.viewsUi.FormFieldFiller=function(e,i,t,r){var s=jQuery;this.source=s("#edit-human-name"),this.target=e,this.exclude=i||!1,this.replace=t||"",this.suffix=r||"";var a=this;this.populate=function(){return a._populate.call(a)},this.unbind=function(){return a._unbind.call(a)},this.bind()},Drupal.viewsUi.FormFieldFiller.prototype.bind=function(){this.unbind(),this.source.bind("keyup.viewsUi change.viewsUi",this.populate),this.target.bind("focus.viewsUi",this.unbind)},Drupal.viewsUi.FormFieldFiller.prototype.getTransliterated=function(){var e=this.source.val();return this.exclude&&(e=e.toLowerCase().replace(this.exclude,this.replace)),e+this.suffix},Drupal.viewsUi.FormFieldFiller.prototype._populate=function(){var e=this.getTransliterated();this.target.val(e)},Drupal.viewsUi.FormFieldFiller.prototype._unbind=function(){this.source.unbind("keyup.viewsUi change.viewsUi",this.populate),this.target.unbind("focus.viewsUi",this.unbind)},Drupal.viewsUi.FormFieldFiller.prototype.rebind=function(e){this.target=e,this.bind()},Drupal.behaviors.addItemForm={},Drupal.behaviors.addItemForm.attach=function(e){var i=jQuery,t=i(e).find('form[id^="views-ui-add-item-form"]').first();t=t.once("views-ui-add-item-form"),t.length&&new Drupal.viewsUi.addItemForm(t)},Drupal.viewsUi.addItemForm=function(e){this.$form=e,this.$form.find(".views-filterable-options :checkbox").click(jQuery.proxy(this.handleCheck,this)),this.$selected_div=this.$form.find(".views-selected-options").parent(),this.$selected_div.hide(),this.checkedItems=[]},Drupal.viewsUi.addItemForm.prototype.handleCheck=function(e){var i=jQuery(e.target),t=jQuery.trim(i.next().text());if(i.is(":checked"))this.$selected_div.show(),this.checkedItems.push(t);else{for(var r=(this.checkedItems.length,jQuery.inArray(t,this.checkedItems)),s=0;s<this.checkedItems.length;s++)if(s==r){this.checkedItems.splice(s,1),s--;break}0==this.checkedItems.length&&this.$selected_div.hide()}this.refreshCheckedItems()},Drupal.viewsUi.addItemForm.prototype.refreshCheckedItems=function(){this.$selected_div.find(".views-selected-options").html(Drupal.checkPlain(this.checkedItems.join(", "))),Drupal.viewsUi.resizeModal("",!0)},Drupal.behaviors.viewsUiRenderAddViewButton={},Drupal.behaviors.viewsUiRenderAddViewButton.attach=function(e,i){var t=jQuery,r=t("#views-display-menu-tabs",e).once("views-ui-render-add-view-button-processed");if(r.length){var s=t('<li class="add"><a href="#"><span class="icon add"></span>'+Drupal.t("Add")+'</a><ul class="action-list" style="display:none;"></ul></li>'),a=r.nextAll("input.add-display").detach();a.appendTo(s.find(".action-list")).wrap("<li>").parent().first().addClass("first").end().last().addClass("last"),a.each(function(){var e=t(this).val();"Add "==e.substr(0,4)&&t(this).val(e.substr(4))}),s.appendTo(r),t("li.add > a",r).bind("click",function(e){e.preventDefault();var i=t(this);Drupal.behaviors.viewsUiRenderAddViewButton.toggleMenu(i)}),r.delegate("li.add","mouseleave",function(e){var i=t(this),r=i.children('a[href="#"]');i.children(".action-list").is(":visible")&&Drupal.behaviors.viewsUiRenderAddViewButton.toggleMenu(r)})}},Drupal.behaviors.viewsUiRenderAddViewButton.toggleMenu=function(e){e.parent().toggleClass("open"),e.next().slideToggle("fast")},Drupal.behaviors.viewsUiSearchOptions={},Drupal.behaviors.viewsUiSearchOptions.attach=function(e){var i=jQuery,t=i(e).find('form[id^="views-ui-add-item-form"]').first();t=t.once("views-ui-filter-options"),t.length&&new Drupal.viewsUi.OptionsSearch(t)},Drupal.viewsUi.OptionsSearch=function(e){this.$form=e,this.$searchBox=this.$form.find("#edit-options-search"),this.$searchBox.keyup(jQuery.proxy(this.handleKeyup,this)),this.options=this.getOptions(this.$form.find(".filterable-option")),this.handleKeyup(),this.$searchBox.keypress(function(e){13==e.which&&e.preventDefault()})},Drupal.viewsUi.OptionsSearch.prototype.getOptions=function(e){var i,t,r,s,a=jQuery,o=[],n=e.length;for(i=0;n>i;i++)s=a(e[i]),t=s.find("label"),r=s.find("div.description"),o[i]={searchText:t.text().toLowerCase()+" "+r.text().toLowerCase(),$div:s};return o},Drupal.viewsUi.OptionsSearch.prototype.handleKeyup=function(e){var i,t,r,s,a,o,n,l,p;a=this.$searchBox.val().toLowerCase(),o=a.split(" "),n=o.length,p=0;var d=this.options.length;for(t=0;d>t;t++){for(s=this.options[t],i=!0,r=0;n>r;r++)-1===s.searchText.indexOf(o[r])&&(i=!1);i?(l=p%2?"odd":"even",s.$div.show(),s.$div.removeClass("even odd"),s.$div.addClass(l),p++):s.$div.hide()}},Drupal.behaviors.viewsUiPreview={},Drupal.behaviors.viewsUiPreview.attach=function(e,i){var t=jQuery,r=t(".views-display-column .views-ui-display-tab-bucket.contextual-filters",e);if(0!=r.length){var s=t(".views-display-setting a",r);s.length?t("#preview-args").parent().show():t("#preview-args").parent().hide(),t("#edit-displays-live-preview").once("edit-displays-live-preview").is(":checked")&&t("#preview-submit").once("edit-displays-live-preview").click()}},Drupal.behaviors.viewsUiRearrangeFilter={},Drupal.behaviors.viewsUiRearrangeFilter.attach=function(e,i){var t=jQuery;if("undefined"!=typeof Drupal.tableDrag&&"undefined"!=typeof Drupal.tableDrag["views-rearrange-filters"]){var r=t("#views-rearrange-filters",e).once("views-rearrange-filters"),s=t(".form-item-filter-groups-operator",e).once("views-rearrange-filters");r.length&&new Drupal.viewsUi.rearrangeFilterHandler(r,s)}},Drupal.viewsUi.rearrangeFilterHandler=function(e,i){var t=jQuery;this.table=e,this.operator=i,this.hasGroupOperator=this.operator.length>0,this.draggableRows=t(".draggable",e),this.addGroupButton=t("input#views-add-group"),this.removeGroupButtons=t("input.views-remove-group",e),this.insertAddRemoveFilterGroupLinks(),this.hasGroupOperator&&(this.dropdowns=this.duplicateGroupsOperator(),this.syncGroupsOperators()),this.modifyTableDrag(),this.redrawOperatorLabels(),t(".views-group-title select",e).once("views-rearrange-filter-handler").bind("change.views-rearrange-filter-handler",t.proxy(this,"redrawOperatorLabels")),t("a.views-groups-remove-link",this.table).once("views-rearrange-filter-handler").bind("click.views-rearrange-filter-handler",t.proxy(this,"updateRowspans")).bind("click.views-rearrange-filter-handler",t.proxy(this,"redrawOperatorLabels"))},Drupal.viewsUi.rearrangeFilterHandler.prototype.insertAddRemoveFilterGroupLinks=function(){var e=jQuery;e('<ul class="action-links"><li><a id="views-add-group-link" href="#">'+this.addGroupButton.val()+"</a></li></ul>").prependTo(this.table.parent()).once("views-rearrange-filter-handler").bind("click.views-rearrange-filter-handler",e.proxy(this,"clickAddGroupButton"));var t=this.removeGroupButtons.length;for(i=0;i<t;i++){var r=e(this.removeGroupButtons[i]),s=r.attr("id");e('<a href="#" class="views-remove-group-link">'+Drupal.t("Remove group")+"</a>").insertBefore(r).once("views-rearrange-filter-handler").bind("click.views-rearrange-filter-handler",{buttonId:s},e.proxy(this,"clickRemoveGroupButton"))}},Drupal.viewsUi.rearrangeFilterHandler.prototype.clickAddGroupButton=function(){return this.addGroupButton.mousedown(),this.addGroupButton.submit(),!1},Drupal.viewsUi.rearrangeFilterHandler.prototype.clickRemoveGroupButton=function(e){return jQuery("input#"+e.data.buttonId,this.table).submit(),!1},Drupal.viewsUi.rearrangeFilterHandler.prototype.duplicateGroupsOperator=function(){var e,i,t,r=jQuery,s=r("tr.views-group-title");this.operator.find("label").add("div.description").addClass("element-invisible"),this.operator.find("select").addClass("form-select"),e=this.operator,t=r("tr#views-group-title-2"),i=r('<tr class="filter-group-operator-row"><td colspan="5"></td></tr>'),i.find("td").append(this.operator),i.insertBefore(t);var a,o=s.length;for(a=2;o>a;a++){t=r(s[a]);var n=this.operator.clone();n.attr("id",""),i=r('<tr class="filter-group-operator-row"><td colspan="5"></td></tr>'),i.find("td").append(n),i.insertBefore(t),e=e.add(n)}return e},Drupal.viewsUi.rearrangeFilterHandler.prototype.syncGroupsOperators=function(){this.dropdowns.length<2||this.dropdowns.change(jQuery.proxy(this,"operatorChangeHandler"))},Drupal.viewsUi.rearrangeFilterHandler.prototype.operatorChangeHandler=function(e){var i=jQuery,t=i(e.target),r=this.dropdowns.find("select").not(t);r.val(t.val())},Drupal.viewsUi.rearrangeFilterHandler.prototype.modifyTableDrag=function(){var e=Drupal.tableDrag["views-rearrange-filters"],i=this;e.row.prototype.onSwap=function(){if(i.hasGroupOperator){var e=jQuery(this.group),t=e.prev("tr");if(t.length&&!t.hasClass("group-message")&&!t.hasClass("draggable")){var r=e.next();r.is("tr")&&this.swap("after",r)}i.updateRowspans()}i.redrawOperatorLabels()},e.onDrop=function(){var e=jQuery,i=e(this.oldRowElement).find(".tabledrag-changed");if(i.length){var t=i.prevAll(".views-operator-label");t.length&&t.insertAfter(i)}var r=e(this.rowObject.element).prevAll("tr.group-message").get(0),s=r.className.replace(/([^ ]+[ ]+)*group-([^ ]+)-message([ ]+[^ ]+)*/,"$2"),a=e("select.views-group-select",this.rowObject.element);if(e(this.rowObject.element).prev("tr").is(".group-message")&&!a.is(".views-group-select-"+s)){var o=a.attr("class").replace(/([^ ]+[ ]+)*views-group-select-([^ ]+)([ ]+[^ ]+)*/,"$2");a.removeClass("views-group-select-"+o).addClass("views-group-select-"+s),a.val(s)}}},Drupal.viewsUi.rearrangeFilterHandler.prototype.redrawOperatorLabels=function(){var e=jQuery;for(i=0;i<this.draggableRows.length;i++){var t=e(this.draggableRows[i]),r=e("td:first",t);if(r.length){var s=t.prevAll(".views-group-title").find("option:selected").html(),a='<span class="views-operator-label">'+s+"</span>",o=t.nextAll(":visible").eq(0),n=r.find(".views-operator-label");o.hasClass("draggable")?n.length?n.replaceWith(a):r.append(a):n.remove()}}},Drupal.viewsUi.rearrangeFilterHandler.prototype.updateRowspans=function(){var e,i,t,r,s,a=jQuery,o=a(this.table).find("tr"),n=o.length;for(e=0;n>e;e++)i=a(o[e]),i.hasClass("views-group-title")?(s=a(i.find("td.group-operator")),r=0,t=i.next("tr"),t.removeClass("group-populated").addClass("group-empty"),s.attr("rowspan",2)):i.hasClass("draggable")&&i.is(":visible")&&(r++,t.removeClass("group-empty").addClass("group-populated"),s.attr("rowspan",r+1))},Drupal.behaviors.viewsFilterConfigSelectAll={},Drupal.behaviors.viewsFilterConfigSelectAll.attach=function(e){var i=jQuery;i("#views-ui-config-item-form div.form-item-options-value-all",e).once(function(){i(this).show()}).find("input[type=checkbox]").click(function(){var e=i(this).is(":checked");i(this).parents(".form-checkboxes").find("input[type=checkbox]").each(function(){i(this).attr("checked",e)})}),i("#views-ui-config-item-form div.form-type-checkbox").not(i(".form-item-options-value-all")).find("input[type=checkbox]").each(function(){i(this).click(function(){0==i(this).is("checked")&&i("#edit-options-value-all").removeAttr("checked")})})},Drupal.behaviors.viewsImplicitFormSubmission={},Drupal.behaviors.viewsImplicitFormSubmission.attach=function(e,i){var t=jQuery;t(":text, :password, :radio, :checkbox",e).once("viewsImplicitFormSubmission",function(){t(this).keypress(function(e){if(13==e.which){var r=this.form.id;if(r&&i.viewsImplicitFormSubmission&&i.viewsImplicitFormSubmission[r]&&i.viewsImplicitFormSubmission[r].defaultButton){e.preventDefault();var s=i.viewsImplicitFormSubmission[r].defaultButton,a=t("#"+s,this.form);1==a.length&&a.is(":enabled")&&(Drupal.ajax&&Drupal.ajax[s]?a.trigger(Drupal.ajax[s].element_settings.event):a.click())}}})})},Drupal.behaviors.viewsRemoveIconClass={},Drupal.behaviors.viewsRemoveIconClass.attach=function(e,i){jQuery(".ctools-button",e).once("RemoveIconClass",function(){var e=jQuery,i=e(this);e(".icon",i).removeClass("icon"),e(".horizontal",i).removeClass("horizontal")})},Drupal.behaviors.viewsUiCheckboxify={},Drupal.behaviors.viewsUiCheckboxify.attach=function(e,i){var t,r=jQuery,s=r("#edit-options-expose-button-button, #edit-options-group-button-button").once("views-ui-checkboxify"),a=s.length;for(t=0;a>t;t++)new Drupal.viewsUi.Checkboxifier(s[t])},Drupal.behaviors.viewsUiChangeDefaultWidget={},Drupal.behaviors.viewsUiChangeDefaultWidget.attach=function(e,i){function t(e){e?(r("input.default-radios").hide(),r("td.any-default-radios-row").parent().hide(),r("input.default-checkboxes").show()):(r("input.default-checkboxes").hide(),r("td.any-default-radios-row").parent().show(),r("input.default-radios").show())}var r=jQuery;r('input[name="options[group_info][multiple]"]').change(function(){t(r(this).attr("checked"))}),r('input[name="options[group_info][multiple]"]').trigger("change")},Drupal.viewsUi.Checkboxifier=function(e){var i=jQuery;this.$button=i(e),this.$parent=this.$button.parent("div.views-expose, div.views-grouped"),this.$input=this.$parent.find("input:checkbox, input:radio"),this.$button.hide(),this.$parent.find(".exposed-description, .grouped-description").hide(),this.$input.click(i.proxy(this,"clickHandler"))},Drupal.viewsUi.Checkboxifier.prototype.clickHandler=function(e){this.$button.mousedown(),this.$button.submit()},Drupal.behaviors.viewsUiOverrideSelect={},Drupal.behaviors.viewsUiOverrideSelect.attach=function(e,i){var t=jQuery;t("#edit-override-dropdown",e).once("views-ui-override-button-text",function(){var i=t("#edit-submit",e),r=i.val();i.once("views-ui-override-button-text").bind("mouseup",function(){return t(this).val(r),!0}),t(this).bind("change",function(){"default"==t(this).val()?i.val(Drupal.t("Apply (all displays)")):"default_revert"==t(this).val()?i.val(Drupal.t("Revert to default")):i.val(Drupal.t("Apply (this display)"))}).trigger("change")})},Drupal.viewsUi.resizeModal=function(e,i){var t=jQuery,r=t(".views-ui-dialog"),s=t(".scroll",r);if(0!=r.size()&&"none"!=r.css("display")){var a=parseInt(.85*t(window).width()),o=parseInt(.6*t(window).width());r.css("width",o);var n=o,l=parseInt(.8*t(window).height()),p=200;i&&(p=r.height()),p>l&&(p=l);var d=0,u=0;u+=parseInt(s.css("padding-top")),u+=parseInt(s.css("padding-bottom")),s.children().each(function(){var e=t(this).innerWidth();e>n&&(n=e),u+=t(this).outerHeight(!0)});var h=0;h+=parseInt(s.css("padding-top")),h+=parseInt(s.css("padding-bottom")),h+=t(".views-override").outerHeight(!0),h+=t(".views-messages").outerHeight(!0),h+=t("#views-ajax-title").outerHeight(!0),h+=t(".views-add-form-selected").outerHeight(!0),h+=t(".form-buttons",r).outerHeight(!0),d=u+h,d>l?(d=l,u=l-h):p>d&&(d=p,u=p-h),n>a&&(n=a);var c=t(window).height()/2-d/2,v=t(window).width()/2-n/2;r.css({top:c+"px",left:v+"px",width:n+"px",height:d+"px"}),t(Drupal.settings.views.ajax.popup).css("height",d+"px"),s.css({height:u+"px","max-height":u+"px"})}},jQuery(function(){jQuery(window).bind("resize",Drupal.viewsUi.resizeModal),jQuery(window).bind("scroll",Drupal.viewsUi.resizeModal)});