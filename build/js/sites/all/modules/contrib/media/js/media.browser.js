!function(e){namespace("Drupal.media.browser"),Drupal.media.browser.selectedMedia=[],Drupal.media.browser.mediaAdded=function(){},Drupal.media.browser.selectionFinalized=function(e){},Drupal.behaviors.MediaBrowser={attach:function(a){Drupal.settings.media&&Drupal.settings.media.selectedMedia&&(Drupal.media.browser.selectMedia(Drupal.settings.media.selectedMedia),Drupal.media.browser.finalizeSelection());var r=function(a,r){(parent_iframe=Drupal.media.browser.getParentIframe(window))&&e(parent_iframe).attr("current_tab",e("#media-tabs-wrapper > ul > li.ui-state-active").index())},i=Drupal.media.browser.tabFromHash();e("#media-browser-tabset").once("MediaBrowser").tabs({selected:i,active:i,show:r,activate:r}),e(".media-browser-tab").each(Drupal.media.browser.validateButtons)}},Drupal.media.browser.getParentIframe=function(e){for(var a=parent.document.getElementsByTagName("IFRAME"),r=0;r<a.length;r++)if(a[r].contentWindow===e)return a[r]},Drupal.media.browser.tabFromHash=function(){return(parent_iframe=Drupal.media.browser.getParentIframe(window))?e(parent_iframe).attr("current_tab"):0},Drupal.media.browser.launch=function(){},Drupal.media.browser.validateButtons=function(){e("a.button.fake-submit",this).once().bind("click",Drupal.media.browser.submit)},Drupal.media.browser.submit=function(){var a=e(parent.window.document.body).find("#mediaBrowser").parent(".ui-dialog").find(".ui-dialog-buttonpane button");return a[0].click(),!1},Drupal.media.browser.selectMedia=function(e){Drupal.media.browser.selectedMedia=e},Drupal.media.browser.selectMediaAndSubmit=function(e){Drupal.media.browser.selectedMedia=e,Drupal.media.browser.submit()},Drupal.media.browser.finalizeSelection=function(){if(!Drupal.media.browser.selectedMedia)throw new exception(Drupal.t("Cannot continue, nothing selected"));Drupal.media.browser.selectionFinalized(Drupal.media.browser.selectedMedia)}}(jQuery);