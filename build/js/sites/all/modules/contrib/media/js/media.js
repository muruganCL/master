!function(i){Drupal.behaviors.mediaElement={attach:function(e,a){a.media&&a.media.elements&&i.each(a.media.elements,function(t){i(t,e).once("media-browser-launch",function(){var n=a.media.elements[t];i(t,e).children(".browse").show(),i(t,e).children(".upload").hide(),i(t,e).children(".attach").hide(),i(t,e).children(".browse").bind("click",{configuration:n},Drupal.media.openBrowser)})})}},Drupal.behaviors.mediaButtons={attach:function(e){i("input.form-submit",e).bind("mousedown",Drupal.media.disableFields)},detach:function(e){i("input.form-submit",e).unbind("mousedown",Drupal.media.disableFields)}},Drupal.media=Drupal.media||{},Drupal.media.openBrowser=function(e){var a=e.data.configuration.global,t=(i(this).siblings(".fid"),i(this).siblings(".preview")),n=i(this).siblings(".upload");i(this).siblings(".edit"),i(this).siblings(".remove");return Drupal.media.popups.mediaBrowser(function(i){if(!(i.length<0)){var e=i[0];n.val(e.fid),n.trigger("change");var a=n.siblings(".attach");a.trigger("mousedown"),t.html(e.preview)}},a),!1},Drupal.media.disableFields=function(e){var a=this;if(i(a).hasClass("ajax-processed")){var t=[];i(this).closest("div.media-widget").length>0&&(t=i(this).closest("div.media-widget").find("input.attach"));var n=i("div.media-widget input.attach").not(t).not(":disabled");n.attr("disabled","disabled"),setTimeout(function(){n.attr("disabled",!1)},1e3)}}}(jQuery);