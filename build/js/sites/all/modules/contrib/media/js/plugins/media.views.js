!function(e){namespace("Drupal.media.browser.views"),Drupal.behaviors.mediaViews={attach:function(i,s){e(".ctools-auto-submit-full-form .views-exposed-form input:text, input:text.ctools-auto-submit",i).filter(":not(.ctools-auto-submit-exclude)").bind("keydown keyup",function(e){13===e.keyCode&&(e.stopImmediatePropagation(),e.preventDefault())}),e(".view-content ul.media-list-thumbnails a").click(function(){return!1});var a=[];for(var t in Drupal.settings.media.browser.views)a.push(t);for(var d=0;d<a.length;d++)for(var r=a[d],l=0;l<Drupal.settings.media.browser.views[r].length;l++){var n=Drupal.settings.media.browser.views[r][l],o=e(".view-id-"+r+".view-display-id-"+n);o.length&&Drupal.media.browser.views.setup(o)}e("#media-browser-tabset").bind("tabsselect",function(i,s){var a=e(".view",s.panel);a.length&&Drupal.media.browser.views.select(a)})}},Drupal.media.browser.views.select=function(i){Drupal.media.browser.selectMedia([]),e(".view-content .media-item",i).removeClass("selected")},Drupal.media.browser.views.setup=function(i){e(i).hasClass("media-browser-views-processed")||(Drupal.media.browser.selectMedia([]),e(".view-content .media-item",i).bind("dblclick",function(){var s=e(this).closest(".media-item[data-fid]").data("fid"),a=new Array;e(".view-content .media-item",i).removeClass("selected"),e(this).addClass("selected");for(index in Drupal.settings.media.files)if(Drupal.settings.media.files[index].fid==s){a.push(Drupal.settings.media.files[index]);break}Drupal.media.browser.selectMediaAndSubmit(a)}),e(".view-content .media-item",i).bind("click",function(){var s=e(this).closest(".media-item[data-fid]").data("fid"),a=new Array;if(e(".view-content .media-item",i).removeClass("selected"),e(this).addClass("selected"),Drupal.settings.media.browser.params.multiselect)for(index in Drupal.media.browser.selectedMedia){var t=Drupal.media.browser.selectedMedia[index].fid;t==s?(e(this).removeClass("selected"),s=NaN):(a.push(Drupal.media.browser.selectedMedia[index]),e(".view-content *[data-fid="+t+"].media-item",i).addClass("selected"))}for(index in Drupal.settings.media.files)if(Drupal.settings.media.files[index].fid==s){a.push(Drupal.settings.media.files[index]);break}Drupal.media.browser.selectMedia(a)}),e(i).addClass("media-browser-views-processed"))}}(jQuery);