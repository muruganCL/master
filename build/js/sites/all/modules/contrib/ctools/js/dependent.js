!function(e){Drupal.CTools=Drupal.CTools||{},Drupal.CTools.dependent={},Drupal.CTools.dependent.bindings={},Drupal.CTools.dependent.activeBindings={},Drupal.CTools.dependent.activeTriggers=[],Drupal.CTools.dependent.inArray=function(e,n){for(var d=e.length;d--;)if(e[d]==n)return!0;return!1},Drupal.CTools.dependent.autoAttach=function(){for(i in Drupal.CTools.dependent.activeTriggers)e(Drupal.CTools.dependent.activeTriggers[i]).unbind("change.ctools-dependent");if(Drupal.CTools.dependent.activeTriggers=[],Drupal.CTools.dependent.activeBindings={},Drupal.CTools.dependent.bindings={},Drupal.settings.CTools)for(id in Drupal.settings.CTools.dependent){Drupal.CTools.dependent.activeBindings[id]=0;for(bind_id in Drupal.settings.CTools.dependent[id].values){if(Drupal.CTools.dependent.bindings[bind_id]||(Drupal.CTools.dependent.bindings[bind_id]=[]),Drupal.CTools.dependent.bindings[bind_id].push(id),"radio:"==bind_id.substring(0,6))var n="input[name='"+bind_id.substring(6)+"']";else var n="#"+bind_id;Drupal.CTools.dependent.activeTriggers.push(n),"checkbox"==e(n).attr("type")&&e(n).siblings("label").addClass("hidden-options");var d=function(n,d){if(0==e(d).size())return null;if("radio:"==n.substring(0,6))var i=e(d+":checked").val();else switch(e(d).attr("type")){case"checkbox":var i=e(d).attr("checked")?!0:!1;i?e(d).siblings("label").removeClass("hidden-options").addClass("expanded-options"):e(d).siblings("label").removeClass("expanded-options").addClass("hidden-options");break;default:var i=e(d).val()}return i},t=function(n,t){var s=function(){var s=d(t,n);if(null!=s)for(i in Drupal.CTools.dependent.bindings[t]){var o=Drupal.CTools.dependent.bindings[t][i];if("string"==typeof o){Drupal.CTools.dependent.activeBindings[o]||(Drupal.CTools.dependent.activeBindings[o]={}),null!=s&&Drupal.CTools.dependent.inArray(Drupal.settings.CTools.dependent[o].values[t],s)?Drupal.CTools.dependent.activeBindings[o][t]="bind":delete Drupal.CTools.dependent.activeBindings[o][t];var l=0;for(i in Drupal.CTools.dependent.activeBindings[o])l++;var a=e("#"+o+"-wrapper");if(!a.size()){var r=e("#"+o);if(r.is("fieldset")||r.is("textarea"))continue;a=e("#"+o).parent()}"disable"==Drupal.settings.CTools.dependent[o].type?Drupal.settings.CTools.dependent[o].num<=l?(a.attr("disabled",!1),a.addClass("dependent-options"),a.children().attr("disabled",!1)):(a.attr("disabled",!0),a.children().attr("disabled",!0)):Drupal.settings.CTools.dependent[o].num<=l?(a.show(0),a.addClass("dependent-options")):a.css("display","none")}}};e(n).bind("change.ctools-dependent",function(){s(n,t)}),s(n,t)};t(n,bind_id)}}},Drupal.behaviors.CToolsDependent={attach:function(n){Drupal.CTools.dependent.autoAttach(),e("select.ctools-master-dependent").once("ctools-dependent").bind("change.ctools-dependent",function(){var n=e(this).val();"all"==n?e(".ctools-dependent-all").show(0):(e(".ctools-dependent-all").hide(0),e(".ctools-dependent-"+n).show(0))}).trigger("change.ctools-dependent")}}}(jQuery);