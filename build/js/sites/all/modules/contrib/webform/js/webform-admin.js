!function(e){"use strict";Drupal.behaviors.webformAdmin={},Drupal.behaviors.webformAdmin.attach=function(e){Drupal.webform.setActive(e),Drupal.webform.updateTemplate(e),Drupal.webform.selectCheckboxesLink(e),Drupal.webform.tableSelectIndentation(e),Drupal.webform.downloadExport(e),Drupal.webform.conditionalAdmin(e),Drupal.webform.radioLabelAutoClick(e)},Drupal.webform=Drupal.webform||{},Drupal.webform.setActive=function(o){e(".webform-inline-radio",o).click(function(o){e(this).closest(".form-type-radio").find("input[type=radio]").webformProp("checked",!0)}),e(".webform-set-active",o).change(function(o){e(this).val()&&e(this).closest(".form-type-radio").find("input[type=radio]").webformProp("checked",!0),o.preventDefault()}),navigator.userAgent.match(/Firefox/)&&e(".webform-inline-radio",o).removeAttr("for")},Drupal.webform.updateTemplate=function(o){var t=e("#edit-templates-default").val(),i=e("#webform-template-fieldset select#edit-template-option",o),n=e("#webform-template-fieldset textarea:visible",o),r=function(){e(this).val()==t?i.val("default"):i.val("custom")},a=function(){"default"==e(this).val()&&n.val()!=t&&(confirm(Drupal.settings.webform.revertConfirm)?n.val(t):e(this).val("custom"))};n.keyup(r),i.change(a)},Drupal.webform.selectCheckboxesLink=function(o){function t(){var o=this.className.replace(/.*?webform-select-link-([^ ]*).*/,"$1"),t=e(".webform-select-group-"+o+" input[type=checkbox]"),i=!t[0].checked;return t.each(function(){this.checked=i}),t.trigger("change"),!1}e("a.webform-select-link",o).click(t)},Drupal.webform.tableSelectIndentation=function(o){var t=e("th.select-all",o).parents("table");t.find("input.form-checkbox").change(function(){for(var o=e(this).parents("table:first").find("tr"),t=e(this).parents("tr:first").get(0),i=o.index(t),n=o.size(),r=e(t).find("div.indentation").size(),a=i+1;n>a&&!(o.eq(a).find("div.indentation").size()<=r);a++)o.eq(a).find("input.form-checkbox").webformProp("checked",this.checked)})},Drupal.webform.downloadExport=function(e){e===document&&Drupal.settings&&Drupal.settings.webformExport&&document.cookie.match(/webform_export_info=1/)&&(window.location=Drupal.settings.webformExport,delete Drupal.settings.webformExport)},Drupal.webform.conditionalAdmin=function(o){var t=e(o);t.find("#webform-conditionals-ajax:not(.webform-conditional-processed)").addClass("webform-conditional-processed").bind("change",function(o){var t=e(o.target);t.is(".webform-conditional-source select")&&Drupal.webform.conditionalSourceChange.apply(o.target),t.is(".webform-conditional-operator select")&&Drupal.webform.conditionalOperatorChange.apply(o.target),t.is(".webform-conditional-andor select")&&Drupal.webform.conditionalAndOrChange.apply(o.target),t.is(".webform-conditional-action select")&&Drupal.webform.conditionalActionChange.apply(o.target)}),t.find(".webform-conditional-rule-remove:not(.webform-conditional-processed)").bind("click",function(){this.webformRemoveClass=".webform-conditional-rule-remove",window.setTimeout(e.proxy(Drupal.webform.conditionalRemove,this),100)}).addClass("webform-conditional-processed"),t.find(".webform-conditional-action-remove:not(.webform-conditional-processed)").bind("click",function(){this.webformRemoveClass=".webform-conditional-action-remove",window.setTimeout(e.proxy(Drupal.webform.conditionalRemove,this),100)}).addClass("webform-conditional-processed"),t.find(".webform-conditional-source select").trigger("change"),t.find(".webform-conditional-action select").trigger("change"),t.is("tr.ajax-new-content")&&1===t.find(".webform-conditional").length&&(Drupal.tableDrag["webform-conditionals-table"].makeDraggable(t[0]),t.find(".webform-conditional-weight").closest("td").addClass("tabledrag-hide"),"1"!==e.cookie("Drupal.tableDrag.showWeight")&&Drupal.tableDrag["webform-conditionals-table"].hideColumns(),t.removeClass("ajax-new-content"))},Drupal.webform.conditionalRemove=function(){var o=e(this).parents(".webform-conditional:first").find(this.webformRemoveClass).length;if(1>=o){var t=e(this).parents("tr:first"),i=e("#webform-conditionals-table");t.length&&i.length&&(t.remove(),Drupal.webform.restripeTable(i[0]))}},Drupal.webform.conditionalSourceChange=function(){var o=e(this).val(),t=Drupal.settings.webform.conditionalValues.sources[o].data_type,i=e(this).parents(".webform-conditional-rule:first").find(".webform-conditional-operator select");i[0].webformConditionalOriginal||(i[0].webformConditionalOriginal=i[0].innerHTML);var n=e(i[0].webformConditionalOriginal),r=n.filter("optgroup[label="+t+"]"),a=r[0].innerHTML;a!=i.html()&&i.html(a),i.trigger("change")},Drupal.webform.conditionalOperatorChange=function(){var o=e(this).parents(".webform-conditional-rule:first").find(".webform-conditional-source select").val(),t=Drupal.settings.webform.conditionalValues.sources[o].data_type,i=e(this).val(),n=e(this).parents(".webform-conditional-rule:first").find(".webform-conditional-value"),r=n.find("input, select, textarea").attr("name"),a=!1,l=Drupal.settings.webform.conditionalValues.operators[t][i].form,s="undefined"==typeof Drupal.settings.webform.conditionalValues.forms[l]?!1:o;if(n[0].webformConditionalOriginal){if(n[0].webformConditionalFormKey==l&&n[0].webformConditionalFormSource==s)return}else n[0].webformConditionalOriginal=n[0].innerHTML,a=n.find("input:first").val();n[0].webformConditionalFormKey=l,n[0].webformConditionalFormSource=s,"default"===l?n[0].innerHTML=n[0].webformConditionalOriginal:l===!1?n[0].innerHTML="&nbsp;":"object"==typeof Drupal.settings.webform.conditionalValues.forms[l]?n[0].innerHTML=Drupal.settings.webform.conditionalValues.forms[l][o]:n[0].innerHTML=Drupal.settings.webform.conditionalValues.forms[l];var f=n.find("input, select, textarea").filter(":first");f.attr("name",r),a&&f.val(a)},Drupal.webform.conditionalAndOrChange=function(){e(this).parents(".webform-conditional:first").find(".webform-conditional-andor select").val(this.value)},Drupal.webform.conditionalActionChange=function(){var o=e(this).val(),t=e(this).parents(".webform-conditional:first").find(".webform-conditional-argument input"),i=t.is(":visible");switch(o){case"show":case"require":i&&t.hide();break;case"set":i||t.show()}},Drupal.webform.restripeTable=function(o){e("> tbody > tr, > tr",o).filter(":odd").filter(".odd").removeClass("odd").addClass("even").end().end().filter(":even").filter(".even").removeClass("even").addClass("odd")},Drupal.webform.radioLabelAutoClick=function(o){e("label").once("webform-label").click(function(){e(this).prev("input:radio").change()})},e.fn.webformProp=e.fn.webformProp||function(o,t){return t?e.fn.prop?this.prop(o,!0):this.attr(o,!0):e.fn.prop?this.prop(o,!1):this.removeAttr(o)}}(jQuery);