!function(t){Drupal.behaviors.dateYearRange={},Drupal.behaviors.dateYearRange.attach=function(e,i){var a,o,n;for(o=t("input.select-list-with-custom-option",e).once("date-year-range"),n=0;n<o.length;n++)a=t(o[n]),new Drupal.dateYearRange.SelectListWithCustomOption(a)},Drupal.dateYearRange={},Drupal.dateYearRange.SelectListWithCustomOption=function(t){this.$textfield=t,this.$description=t.next("div.description"),this.defaultValue=t.val(),this.$dropdown=this.createDropdown(),this.$dropdown.insertBefore(t)},Drupal.dateYearRange.SelectListWithCustomOption.prototype.getOriginal=function(t){var e;return"int"===t?(e=parseInt(this.defaultValue,10),window.isNaN(e)&&(e=0)):e=this.defaultValue,e},Drupal.dateYearRange.SelectListWithCustomOption.prototype.getStartValue=function(){var t,e=this.getDirection();switch(e){case"back":t=Math.min(this.getOriginal("int"),-10);break;case"forward":t=0}return t},Drupal.dateYearRange.SelectListWithCustomOption.prototype.getEndValue=function(){var t,e=this.getDirection(),i=this.getOriginal();switch(e){case"back":t=0;break;case"forward":t=-1===i.indexOf("+")?10:Math.max(this.getOriginal("int"),10)}return t},Drupal.dateYearRange.SelectListWithCustomOption.prototype.createDropdown=function(){var e,i,a,o=t("<select>").addClass("form-select date-year-range-select"),n=this.getStartValue(),r=this.getEndValue(),s=this.getDirection();for(i=n;r>=i;i++)a=i,i>0&&(a="+"+i),0===i&&(a="back"===s?"-"+i:"+"+i),e=t("<option>"+Drupal.formatPlural(a,"@count year from now","@count years from now")+"</option>").val(a),o.append(e);return e=t('<option class="custom-option">'+Drupal.t("Other")+"</option>").val(""),o.append(e),o.bind("change",t.proxy(this.handleDropdownChange,this)),this._setInitialDropdownValue(o),o},Drupal.dateYearRange.SelectListWithCustomOption.prototype._setInitialDropdownValue=function(t){var e=this.getOriginal(),i=t.find('option[value="'+e+'"]');i.length?(t.val(e),this.hideTextfield()):t.val("")},Drupal.dateYearRange.SelectListWithCustomOption.prototype.getDirection=function(){if(this.direction)return this.direction;var t;return this.$textfield.hasClass("back")?t="back":this.$textfield.hasClass("forward")&&(t="forward"),this.direction=t,t},Drupal.dateYearRange.SelectListWithCustomOption.prototype.handleDropdownChange=function(){this.syncTextfield(),t(":selected",this.$dropdown).hasClass("custom-option")?this.revealTextfield():this.hideTextfield()},Drupal.dateYearRange.SelectListWithCustomOption.prototype.revealTextfield=function(){this.$textfield.show(),this.$description.show()},Drupal.dateYearRange.SelectListWithCustomOption.prototype.hideTextfield=function(){this.$textfield.hide(),this.$description.hide()},Drupal.dateYearRange.SelectListWithCustomOption.prototype.syncTextfield=function(){var t=this.$dropdown.val();this.$textfield.val(t)}}(jQuery);