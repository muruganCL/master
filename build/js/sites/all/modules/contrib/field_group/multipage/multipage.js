!function(t){Drupal.behaviors.MultiPage={attach:function(e){t(".multipage-panes",e).once("multipage",function(){var e,i=t(":hidden.multipage-active-control",this).val(),a=t("> div.field-group-multipage",this),p=a.parents("form");if(0!=a.length){var r;if(a.each(function(){r=t('<div class="multipage-controls-list clearfix"></div>'),t(this).append(r),Drupal.settings.field_group.multipage_move_submit&&t(".form-actions").length&&t(".form-actions",p).remove().appendTo(t(r,a.last()));var l=new Drupal.multipageControl({title:t("> .multipage-pane-title",this).text(),wrapper:t(this),has_next:t(this).next().length,has_previous:t(this).prev().length});r.append(l.item),t(this).addClass("multipage-pane").data("multipageControl",l),this.id==i&&(e=t(this))}),void 0===e){var l=window.location.hash.replace(/[=%;,\/]/g,"");e="#"!==l&&t(l,this).length?t(window.location.hash,this).closest(".multipage-pane"):t("multipage-open",this).length?t("multipage-open",this):t("> .multipage-pane:first",this)}void 0!==e&&e.data("multipageControl").focus()}})}},Drupal.multipageControl=function(e){var i=this,a=Drupal.theme("multipage",e);t.extend(i,e,a),this.nextLink.click(function(){return i.nextPage(),!1}),this.previousLink.click(function(){return i.previousPage(),!1})},Drupal.multipageControl.prototype={focus:function(){this.wrapper.show().siblings("div.multipage-pane").each(function(){var e=t(this).data("multipageControl");e.wrapper.hide()}).end().siblings(":hidden.multipage-active-control").val(this.wrapper.attr("id")),t("#active-multipage-control").remove(),this.nextLink.after('<span id="active-multipage-control" class="element-invisible">'+Drupal.t("(active page)")+"</span>")},nextPage:function(){this.wrapper.next().data("multipageControl").focus(),t("html, body").scrollTop(this.wrapper.parents(".field-group-multipage-group-wrapper").offset().top)},previousPage:function(){this.wrapper.prev().data("multipageControl").focus(),t("html, body").scrollTop(this.wrapper.parents(".field-group-multipage-group-wrapper").offset().top)},tabShow:function(){return this.item.show(),this.item.parent().children(".multipage-control").removeClass("first").filter(":visible:first").addClass("first"),this.wrapper.removeClass("multipage-control-hidden").show(),this.focus(),this},tabHide:function(){this.item.hide(),this.item.parent().children(".multipage-control").removeClass("first").filter(":visible:first").addClass("first"),this.wrapper.addClass("horizontal-tab-hidden").hide();var t=this.wrapper.siblings(".multipage-pane:not(.multipage-control-hidden):first");return t.length&&t.data("multipageControl").focus(),this}},Drupal.theme.prototype.multipage=function(e){var i={};return i.item=t('<span class="multipage-button"></span>'),i.previousLink=t('<input type="button" class="form-submit multipage-link-previous" value="" />'),i.previousTitle=Drupal.t("Previous page"),i.item.append(i.previousLink.val(i.previousTitle)),i.nextLink=t('<input type="button" class="form-submit multipage-link-next" value="" />'),i.nextTitle=Drupal.t("Next page"),i.item.append(i.nextLink.val(i.nextTitle)),e.has_next||i.nextLink.hide(),e.has_previous||i.previousLink.hide(),i},Drupal.FieldGroup=Drupal.FieldGroup||{},Drupal.FieldGroup.Effects=Drupal.FieldGroup.Effects||{},Drupal.FieldGroup.Effects.processMultipage={execute:function(e,i,a){if("form"==a){var p=!1;t("div.multipage-pane").each(function(e){t(".error",t(this)).length&&(p||(p=t(this).data("multipageControl")),Drupal.FieldGroup.setGroupWithfocus(t(this)),t(this).data("multipageControl").focus())}),p&&p.focus()}}}}(jQuery);