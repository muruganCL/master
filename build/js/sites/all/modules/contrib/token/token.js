!function(t){Drupal.behaviors.tokenTree={attach:function(e,n){t("table.token-tree",e).once("token-tree",function(){t(this).treeTable()})}},Drupal.behaviors.tokenDialog={attach:function(e,n){t("a.token-dialog",e).once("token-dialog").click(function(){var e=t(this).attr("href"),n=t('<div style="display: none" class="loading">'+Drupal.t("Loading token browser...")+"</div>").appendTo("body"),a={};return a["ajax_page_state[theme]"]=Drupal.settings.ajaxPageState.theme,a["ajax_page_state[theme_token]"]=Drupal.settings.ajaxPageState.theme_token,n.dialog({title:t(this).attr("title")||Drupal.t("Available tokens"),width:700,close:function(t,e){n.remove()}}),n.load(e,a,function(t,e,a){n.removeClass("loading")}),!1})}},Drupal.behaviors.tokenInsert={attach:function(e,n){t('textarea, input[type="text"]',e).focus(function(){Drupal.settings.tokenFocusedField=this}),t(".token-click-insert .token-key",e).once("token-click-insert",function(){var e=t('<a href="javascript:void(0);" title="'+Drupal.t("Insert this token into your form")+'">'+t(this).html()+"</a>").click(function(){if("undefined"==typeof Drupal.settings.tokenFocusedField)alert(Drupal.t("First click a text field to insert your tokens into."));else{var e=Drupal.settings.tokenFocusedField,n=t(this).text();if(document.selection)e.focus(),sel=document.selection.createRange(),sel.text=n;else if(e.selectionStart||"0"==e.selectionStart){var a=e.selectionStart,o=e.selectionEnd;e.value=e.value.substring(0,a)+n+e.value.substring(o,e.value.length)}else e.value+=n;t("html,body").animate({scrollTop:t(e).offset().top},500)}return!1});t(this).html(e)})}}}(jQuery);