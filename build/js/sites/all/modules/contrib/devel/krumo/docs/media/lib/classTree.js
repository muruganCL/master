function WebFXCookie(){document.cookie.length&&(this.cookies=" "+document.cookie)}function WebFXTreeAbstractNode(e,t,i){this.childNodes=[],this.id=webFXTreeHandler.getId(),this.text=e||webFXTreeConfig.defaultText,this.action=t||webFXTreeConfig.defaultAction,this.targetWindow=i||webFXTreeConfig.defaultTarget,this._last=!1,webFXTreeHandler.all[this.id]=this}function WebFXTree(e,t,i,o,n){this.base=WebFXTreeAbstractNode,this.base(e,t),this.icon=o||webFXTreeConfig.rootIcon,this.openIcon=n||webFXTreeConfig.openRootIcon,this.open="0"==webFXTreeHandler.cookies.getCookie(this.id.substr(18,this.id.length-18))?!1:!0,this.folder=!0,this.rendered=!1,webFXTreeHandler.behavior||(webFXTreeHandler.behavior=i||webFXTreeConfig.defaultBehavior),this.targetWindow="right"}function WebFXTreeItem(e,t,i,o,n){this.base=WebFXTreeAbstractNode,this.base(e,t),this.open="1"==webFXTreeHandler.cookies.getCookie(this.id.substr(18,this.id.length-18))?!0:!1,i&&i.add(this),o&&(this.icon=o),n&&(this.openIcon=n)}var webFXTreeConfig={rootIcon:"media/images/empty.png",openRootIcon:"media/images/empty.png",folderIcon:"media/images/empty.png",openFolderIcon:"media/images/empty.png",fileIcon:"media/images/empty.png",iIcon:"media/images/I.png",lIcon:"media/images/L.png",lMinusIcon:"media/images/Lminus.png",lPlusIcon:"media/images/Lplus.png",tIcon:"media/images/T.png",tMinusIcon:"media/images/Tminus.png",tPlusIcon:"media/images/Tplus.png",blankIcon:"media/images/blank.png",defaultText:"Tree Item",defaultAction:"javascript:void(0);",defaultTarget:"right",defaultBehavior:"classic"},webFXTreeHandler={idCounter:0,idPrefix:"webfx-tree-object-",all:{},behavior:null,selected:null,getId:function(){return this.idPrefix+this.idCounter++},toggle:function(e){this.all[e.id.replace("-plus","")].toggle()},select:function(e){this.all[e.id.replace("-icon","")].select()},focus:function(e){this.all[e.id.replace("-anchor","")].focus()},blur:function(e){this.all[e.id.replace("-anchor","")].blur()},keydown:function(e){return this.all[e.id].keydown(window.event.keyCode)},cookies:new WebFXCookie};WebFXCookie.prototype.setCookie=function(e,t){document.cookie=e+"="+escape(t)},WebFXCookie.prototype.getCookie=function(e){if(this.cookies){var t=this.cookies.indexOf(" "+e+"=");if(-1==t)return null;var i=this.cookies.indexOf(";",t);-1==i&&(i=this.cookies.length),i-=t;var o=this.cookies.substr(t,i);return unescape(o.substr(o.indexOf("=")+1,o.length-o.indexOf("=")+1))}return null},WebFXTreeAbstractNode.prototype.add=function(e){e.parentNode=this,this.childNodes[this.childNodes.length]=e;var t=this;for(this.childNodes.length>=2&&(this.childNodes[this.childNodes.length-2]._last=!1);t.parentNode;)t=t.parentNode;if(t.rendered){this.childNodes.length>=2&&(document.getElementById(this.childNodes[this.childNodes.length-2].id+"-plus").src=this.childNodes[this.childNodes.length-2].folder?webFXTreeConfig.tMinusIcon:webFXTreeConfig.tIcon,this.childNodes[this.childNodes.length-2].folder&&(this.childNodes[this.childNodes.length-2].plusIcon=webFXTreeConfig.tPlusIcon,this.childNodes[this.childNodes.length-2].minusIcon=webFXTreeConfig.tMinusIcon),this.childNodes[this.childNodes.length-2]._last=!1),this._last=!0;for(var i=this;i.parentNode;){for(var o=0;o<i.parentNode.childNodes.length&&i.id!=i.parentNode.childNodes[o].id;o++);++o==i.parentNode.childNodes.length?i.parentNode._last=!0:i.parentNode._last=!1,i=i.parentNode}document.getElementById(this.id+"-cont").insertAdjacentHTML("beforeEnd",e.toString()),this.folder||this.openIcon||(this.icon=webFXTreeConfig.folderIcon,this.openIcon=webFXTreeConfig.openFolderIcon),this.folder=!0,this.indent(),this.expand()}return e},WebFXTreeAbstractNode.prototype.toggle=function(){this.folder&&(this.open?this.collapse():this.expand())},WebFXTreeAbstractNode.prototype.select=function(){document.getElementById(this.id+"-anchor").focus()},WebFXTreeAbstractNode.prototype.focus=function(){webFXTreeHandler.selected=this,this.openIcon&&"classic"!=webFXTreeHandler.behavior&&(document.getElementById(this.id+"-icon").src=this.openIcon),document.getElementById(this.id+"-anchor").style.backgroundColor="highlight",document.getElementById(this.id+"-anchor").style.color="highlighttext",document.getElementById(this.id+"-anchor").focus()},WebFXTreeAbstractNode.prototype.blur=function(){this.openIcon&&"classic"!=webFXTreeHandler.behavior&&(document.getElementById(this.id+"-icon").src=this.icon),document.getElementById(this.id+"-anchor").style.backgroundColor="transparent",document.getElementById(this.id+"-anchor").style.color="menutext"},WebFXTreeAbstractNode.prototype.doExpand=function(){"classic"==webFXTreeHandler.behavior&&(document.getElementById(this.id+"-icon").src=this.openIcon),this.childNodes.length&&(document.getElementById(this.id+"-cont").style.display="block"),this.open=!0,webFXTreeHandler.cookies.setCookie(this.id.substr(18,this.id.length-18),"1")},WebFXTreeAbstractNode.prototype.doCollapse=function(){"classic"==webFXTreeHandler.behavior&&(document.getElementById(this.id+"-icon").src=this.icon),this.childNodes.length&&(document.getElementById(this.id+"-cont").style.display="none"),this.open=!1,webFXTreeHandler.cookies.setCookie(this.id.substr(18,this.id.length-18),"0")},WebFXTreeAbstractNode.prototype.expandAll=function(){this.expandChildren(),this.folder&&!this.open&&this.expand()},WebFXTreeAbstractNode.prototype.expandChildren=function(){for(var e=0;e<this.childNodes.length;e++)this.childNodes[e].expandAll()},WebFXTreeAbstractNode.prototype.collapseAll=function(){this.folder&&this.open&&this.collapse(),this.collapseChildren()},WebFXTreeAbstractNode.prototype.collapseChildren=function(){for(var e=0;e<this.childNodes.length;e++)this.childNodes[e].collapseAll()},WebFXTreeAbstractNode.prototype.indent=function(e,t,i,o){null==e&&(e=-2);for(var n=0,s=this.childNodes.length-1;s>=0;s--)if(n=this.childNodes[s].indent(e+1,t,i,o))return;if(t&&o>=this._level)return this.folder?(document.getElementById(this.id+"-plus").src=this.open?webFXTreeConfig.lMinusIcon:webFXTreeConfig.lPlusIcon,this.plusIcon=webFXTreeConfig.lPlusIcon,this.minusIcon=webFXTreeConfig.lMinusIcon):document.getElementById(this.id+"-plus").src=webFXTreeConfig.lIcon,1;var r=document.getElementById(this.id+"-indent-"+e);return r&&(t&&i&&(r._last=!0),r._last?r.src=webFXTreeConfig.blankIcon:r.src=webFXTreeConfig.iIcon),0},WebFXTree.prototype=new WebFXTreeAbstractNode,WebFXTree.prototype.setBehavior=function(e){webFXTreeHandler.behavior=e},WebFXTree.prototype.getBehavior=function(e){return webFXTreeHandler.behavior},WebFXTree.prototype.getSelected=function(){return webFXTreeHandler.selected?webFXTreeHandler.selected:null},WebFXTree.prototype.remove=function(){},WebFXTree.prototype.expand=function(){this.doExpand()},WebFXTree.prototype.collapse=function(){this.focus(),this.doCollapse()},WebFXTree.prototype.getFirst=function(){return null},WebFXTree.prototype.getLast=function(){return null},WebFXTree.prototype.getNextSibling=function(){return null},WebFXTree.prototype.getPreviousSibling=function(){return null},WebFXTree.prototype.keydown=function(e){return 39==e?(this.expand(),!1):37==e?(this.collapse(),!1):40==e&&this.open?(this.childNodes[0].select(),!1):!0},WebFXTree.prototype.toString=function(){var e='<div id="'+this.id+'" ondblclick="webFXTreeHandler.toggle(this);" class="webfx-tree-item" onkeydown="return webFXTreeHandler.keydown(this)">';e+='<img id="'+this.id+'-icon" class="webfx-tree-icon" src="'+("classic"==webFXTreeHandler.behavior&&this.open?this.openIcon:this.icon)+'" onclick="webFXTreeHandler.select(this);"><a href="'+this.action+'" id="'+this.id+'-anchor" target="'+this.targetWindow+'" onfocus="webFXTreeHandler.focus(this);" onblur="webFXTreeHandler.blur(this);">'+this.text+"</a></div>",e+='<div id="'+this.id+'-cont" class="webfx-tree-container" style="display: '+(this.open?"block":"none")+';">';for(var t=0;t<this.childNodes.length;t++)e+=this.childNodes[t].toString(t,this.childNodes.length);return e+="</div>",this.rendered=!0,e},WebFXTreeItem.prototype=new WebFXTreeAbstractNode,WebFXTreeItem.prototype.remove=function(){var e=this.parentNode,t=this.getPreviousSibling(!0),i=this.getNextSibling(!0),o=(this.parentNode.folder,i&&i.parentNode&&i.parentNode.id==e.id?!1:!0);this.getPreviousSibling().focus(),this._remove(),0==e.childNodes.length&&(e.folder=!1,e.open=!1),o&&e.id==t.id&&(document.getElementById(e.id+"-icon").src=webFXTreeConfig.fileIcon),t.parentNode&&t.parentNode==e||e.indent(null,!0,o,this._level),document.getElementById(t.id+"-plus")&&(i?e==t&&e.getNextSibling?document.getElementById(t.id+"-plus").src=webFXTreeConfig.tIcon:i.parentNode!=t&&(document.getElementById(t.id+"-plus").src=webFXTreeConfig.lIcon):document.getElementById(t.id+"-plus").src=webFXTreeConfig.lIcon)},WebFXTreeItem.prototype._remove=function(){for(var e=this.childNodes.length-1;e>=0;e--)this.childNodes[e]._remove();for(var e=0;e<this.parentNode.childNodes.length;e++)if(this.id==this.parentNode.childNodes[e].id){for(var t=e;t<this.parentNode.childNodes.length;t++)this.parentNode.childNodes[e]=this.parentNode.childNodes[e+1];this.parentNode.childNodes.length=this.parentNode.childNodes.length-1,e+1==this.parentNode.childNodes.length&&(this.parentNode._last=!0)}webFXTreeHandler.all[this.id]=null,document.getElementById(this.id)&&(document.getElementById(this.id).innerHTML="",document.getElementById(this.id).removeNode())},WebFXTreeItem.prototype.expand=function(){this.doExpand(),document.getElementById(this.id+"-plus").src=this.minusIcon},WebFXTreeItem.prototype.collapse=function(){this.focus(),this.doCollapse(),document.getElementById(this.id+"-plus").src=this.plusIcon},WebFXTreeItem.prototype.getFirst=function(){return this.childNodes[0]},WebFXTreeItem.prototype.getLast=function(){return this.childNodes[this.childNodes.length-1].open?this.childNodes[this.childNodes.length-1].getLast():this.childNodes[this.childNodes.length-1]},WebFXTreeItem.prototype.getNextSibling=function(){for(var e=0;e<this.parentNode.childNodes.length&&this!=this.parentNode.childNodes[e];e++);return++e==this.parentNode.childNodes.length?this.parentNode.getNextSibling():this.parentNode.childNodes[e]},WebFXTreeItem.prototype.getPreviousSibling=function(e){for(var t=0;t<this.parentNode.childNodes.length&&this!=this.parentNode.childNodes[t];t++);return 0==t?this.parentNode:this.parentNode.childNodes[--t].open||e&&this.parentNode.childNodes[t].folder?this.parentNode.childNodes[t].getLast():this.parentNode.childNodes[t]},WebFXTreeItem.prototype.keydown=function(e){if(39==e&&this.folder)return this.open?(this.getFirst().select(),!1):(this.expand(),!1);if(37==e)return this.open?(this.collapse(),!1):(this.parentNode.select(),!1);if(40==e){if(this.open)return this.getFirst().select(),!1;var t=this.getNextSibling();if(t)return t.select(),!1}else if(38==e)return this.getPreviousSibling().select(),!1;return!0},WebFXTreeItem.prototype.toString=function(e,t){var i=this.parentNode,o="";e+1==t&&(this.parentNode._last=!0);for(var n=0;i.parentNode;)i=i.parentNode,o='<img id="'+this.id+"-indent-"+n+'" src="'+(i._last?webFXTreeConfig.blankIcon:webFXTreeConfig.iIcon)+'">'+o,n++;this._level=n,this.childNodes.length?this.folder=1:this.open=!1,this.folder||"classic"!=webFXTreeHandler.behavior?(this.icon||(this.icon=webFXTreeConfig.folderIcon),this.openIcon||(this.openIcon=webFXTreeConfig.openFolderIcon)):this.icon||(this.icon=webFXTreeConfig.fileIcon);var s=this.text;s=s.replace("<","<"),s=s.replace(">",">");var r='<div id="'+this.id+'" ondblclick="webFXTreeHandler.toggle(this);" class="webfx-tree-item" onkeydown="return webFXTreeHandler.keydown(this)">';r+=o,r+='<img id="'+this.id+'-plus" src="'+(this.folder?this.open?this.parentNode._last?webFXTreeConfig.lMinusIcon:webFXTreeConfig.tMinusIcon:this.parentNode._last?webFXTreeConfig.lPlusIcon:webFXTreeConfig.tPlusIcon:this.parentNode._last?webFXTreeConfig.lIcon:webFXTreeConfig.tIcon)+'" onclick="webFXTreeHandler.toggle(this);">',r+='<img id="'+this.id+'-icon" src="'+("classic"==webFXTreeHandler.behavior&&this.open?this.openIcon:this.icon)+'" onclick="webFXTreeHandler.select(this);"><a href="'+this.action+'" id="'+this.id+'-anchor" target="'+this.targetWindow+'" onfocus="webFXTreeHandler.focus(this);" onblur="webFXTreeHandler.blur(this);">'+s+"</a></div>",r+='<div id="'+this.id+'-cont" class="webfx-tree-container" style="display: '+(this.open?"block":"none")+';">';for(var n=0;n<this.childNodes.length;n++)r+=this.childNodes[n].toString(n,this.childNodes.length);return r+="</div>",this.plusIcon=this.parentNode._last?webFXTreeConfig.lPlusIcon:webFXTreeConfig.tPlusIcon,this.minusIcon=this.parentNode._last?webFXTreeConfig.lMinusIcon:webFXTreeConfig.tMinusIcon,r};