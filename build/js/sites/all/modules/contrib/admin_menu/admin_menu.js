!function(e){Drupal.admin=Drupal.admin||{},Drupal.admin.behaviors=Drupal.admin.behaviors||{},Drupal.admin.hashes=Drupal.admin.hashes||{},Drupal.behaviors.adminMenu={attach:function(n,a){if(a.admin_menu=e.extend({suppress:!1,margin_top:!1,position_fixed:!1,tweak_modules:!1,tweak_permissions:!1,tweak_tabs:!1,destination:"",basePath:a.basePath,hash:0,replacements:{}},a.admin_menu||{}),!a.admin_menu.suppress){var i=e("#admin-menu:not(.admin-menu-processed)",n);!i.length&&a.admin_menu.hash?Drupal.admin.getCache(a.admin_menu.hash,function(i){"string"==typeof i&&i.length>0&&e("body",n).append(i);var t=e("#admin-menu:not(.admin-menu-processed)",n);Drupal.admin.attachBehaviors(n,a,t),e(window).triggerHandler("resize")}):Drupal.admin.attachBehaviors(n,a,i)}}},Drupal.behaviors.adminMenuCollapseModules={attach:function(n,a){a.admin_menu.tweak_modules&&e("#system-modules fieldset:not(.collapsed)",n).addClass("collapsed")}},Drupal.behaviors.adminMenuCollapsePermissions={attach:function(n,a){a.admin_menu.tweak_permissions&&(e("#permissions th:first",n).css({width:e("#permissions th:first",n).width()}),$modules=e("#permissions tr:has(td.module)",n).once("admin-menu-tweak-permissions",function(){var n=e(this);n.bind("click.admin-menu",function(){n.nextAll().each(function(){var n=e(this);return n.is(":has(td.module)")?!1:void n.toggleClass("element-hidden")})})}),window.location.hash.length&&($modules=$modules.not(":has("+window.location.hash+")")),$modules.trigger("click.admin-menu"))}},Drupal.behaviors.adminMenuMarginTop={attach:function(n,a){!a.admin_menu.suppress&&a.admin_menu.margin_top&&e("body:not(.admin-menu)",n).addClass("admin-menu")}},Drupal.admin.getCache=function(n,a){return void 0!==Drupal.admin.hashes.hash?Drupal.admin.hashes.hash:void e.ajax({cache:!0,type:"GET",dataType:"text",global:!1,url:Drupal.settings.admin_menu.basePath.replace(/admin_menu/,"js/admin_menu/cache/"+n),success:a,complete:function(e,n){Drupal.admin.hashes.hash=n}})},Drupal.admin.height=function(){var n=e("#admin-menu"),a=n.outerHeight();return n.css("filter")&&n.css("filter").match(/DXImageTransform\.Microsoft\.Shadow/)&&(a-=n.get(0).filters.item("DXImageTransform.Microsoft.Shadow").strength),a},Drupal.admin.attachBehaviors=function(n,a,i){i.length&&(i.addClass("admin-menu-processed"),e.each(Drupal.admin.behaviors,function(){this(n,a,i)}))},Drupal.admin.behaviors.positionFixed=function(e,n,a){n.admin_menu.position_fixed&&(a.addClass("admin-menu-position-fixed"),a.css("position","fixed"))},Drupal.admin.behaviors.pageTabs=function(n,a,i){if(a.admin_menu.tweak_tabs){var t=e(n).find("ul.tabs.primary");i.find("#admin-menu-wrapper > ul").eq(1).append(t.find("li").addClass("admin-menu-tab")),e(n).find("ul.tabs.secondary").appendTo("#admin-menu-wrapper > ul > li.admin-menu-tab.active").removeClass("secondary"),t.remove()}},Drupal.admin.behaviors.replacements=function(n,a,i){for(var t in a.admin_menu.replacements)e(t,i).html(a.admin_menu.replacements[t])},Drupal.admin.behaviors.destination=function(n,a,i){a.admin_menu.destination&&e("a.admin-menu-destination",i).each(function(){this.search+=(this.search.length?"&":"?")+Drupal.settings.admin_menu.destination})},Drupal.admin.behaviors.hover=function(n,a,i){e("li.expandable",i).hover(function(){clearTimeout(this.sfTimer),e("> ul",this).css({left:"auto",display:"block"}).parent().siblings("li").children("ul").css({left:"-999em",display:"none"})},function(){var n=e("> ul",this);this.sfTimer=setTimeout(function(){n.css({left:"-999em",display:"none"})},400)})},Drupal.admin.behaviors.search=function(n,a,i){function t(){var n,a,t=e(this).val();t!==c&&(c=t,!l&&c.length>=p&&(l=s(i.find("li:not(.admin-menu-action, .admin-menu-action li) > a"))),c.length<p&&f.empty(),c.length>=p&&l&&(n=r(c,l),a=o(n),f.empty().append(a)))}function s(e){return e.map(function(){var e=this.textContent||this.innerText;if("undefined"!=typeof e)return{text:e,textMatch:e.toLowerCase(),element:this}})}function r(n,a){var i=n.toLowerCase();return e.grep(a,function(e){return-1!==e.textMatch.indexOf(i)})}function o(n){var a=e('<ul class="dropdown admin-menu-search-results" />');return e.each(n,function(){var n=this.text,i=e(this.element),t=i.closest("#admin-menu-wrapper > ul > li"),s=t.find("> a").text();t.length&&s&&(n=s+": "+n);var r=e('<li><a href="'+i.attr("href")+'">'+n+"</a></li>");r.data("original-link",e(this.element).parent()),a.append(r)}),a}function m(n){var a=e(this),i="mouseenter"===n.type||"focusin"===n.type;a.trigger(i?"showPath":"hidePath",[this])}function u(n,a){var i=e(this).data("original-link");i.trigger("mouseleave"),h.val("").trigger("keyup")}function d(n,a){if(a){var i=e(a).data("original-link"),t="showPath"===n.type;i.toggleClass("highlight",t),i.trigger(t?"mouseenter":"mouseleave")}}var l,h=e("input.admin-menu-search",i),c=h.val(),p=2,f=e("<div />").insertAfter(h);f.delegate("li","mouseenter mouseleave focus blur",m),f.delegate("li","click",u),i.delegate(".admin-menu-search-results li","showPath hidePath",d),h.bind("keyup search",t)}}(jQuery);