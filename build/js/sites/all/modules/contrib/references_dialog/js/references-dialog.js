!function(e){var i=e(window);Drupal.behaviors.referencesDialog={attach:function(i,a){"undefined"!=typeof a.ReferencesDialog&&e.each(a.ReferencesDialog.fields,function(a,n){e("."+a+" a.references-dialog-activate",i).click(function(i){return i.preventDefault(),Drupal.ReferencesDialog.open(e(this).attr("href"),e(this).html()),Drupal.ReferencesDialog.entityIdReceived=function(i,o,t){if("undefined"!=typeof n.format)var l=n.format.replace("$label",t).replace("$entity_id",o).replace("$entity_type",i);if("undefined"!=typeof n.callback_path){var r={label:t,entity_id:o,entity_type:i};Drupal.ReferencesDialog.invokeCallback(n.callback_path,r,n.callback_settings)}else if("undefined"!=typeof n.target){var c=e("#"+n.target);c.val(l),c.change()}else{var s=e("#"+a);s.val(l),s.change()}},!1})})}},Drupal.ReferencesDialog={dialog_open:!1,open_dialog:null},Drupal.ReferencesDialog.invokeCallback=function(i,a,n){"object"==typeof n&&(a.settings=n),e.post(i,a)},Drupal.ReferencesDialog.entityIdReceived=null,Drupal.ReferencesDialog.open=function(a,n){if(!this.dialog_open){a+=(a.indexOf("?")>-1?"&":"?")+"render=references-dialog";var o=i.width()/100*75,t=i.height()/100*90;this.open_dialog=e('<iframe class="references-dialog-iframe" src="'+a+'"></iframe>').dialog({width:o,height:t,modal:!0,resizable:!1,position:["center",50],title:n,close:function(){Drupal.ReferencesDialog.dialog_open=!1}}).width(o-10).height(t),i.bind("resize scroll",function(){"object"==typeof Drupal.ReferencesDialog&&null!=Drupal.ReferencesDialog.open_dialog&&(Drupal.ReferencesDialog.open_dialog.dialog("option","position",["center",10]),Drupal.ReferencesDialog.setDimensions())}),this.dialog_open=!0}},Drupal.ReferencesDialog.setDimensions=function(){if("object"==typeof Drupal.ReferencesDialog){var e=i.width()/100*75,a=i.height()/100*90;this.open_dialog.dialog("option","width",e).dialog("option","height",a).width(e-10).height(a)}},Drupal.ReferencesDialog.close=function(e,i,a){this.open_dialog.dialog("close"),this.open_dialog.dialog("destroy"),this.open_dialog=null,this.dialog_open=!1,"function"==typeof this.entityIdReceived&&this.entityIdReceived(e,i,a)}}(jQuery);